(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[702],{734:function(e,t,s){Promise.resolve().then(s.bind(s,1720))},3940:function(e,t,s){"use strict";s.d(t,{r:function(){return m}});var a=s(7437),l=s(2265),n=s(3246),r=s(3541),i=s(2595),o=s(1047),c=s(2451),d=s(407),u=s(9048);function m(e){let{onDateRangeChange:t}=e,[s,m]=(0,l.useState)(!1),[x,f]=(0,l.useState)({from:new Date,to:new Date(new Date().getFullYear(),11,31)});return(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsxs)(i.z,{onClick:()=>m(!s),variant:"outline",className:"bg-white w-[240px] justify-start text-left font-normal",children:[(0,a.jsx)(o.Z,{className:"mr-2 h-4 w-4"}),(null==x?void 0:x.from)?x.to?(0,a.jsxs)(a.Fragment,{children:[(0,r.Z)(x.from,"d MMM",{locale:u.Z})," -"," ",(0,r.Z)(x.to,"d MMM, yyyy",{locale:u.Z})]}):(0,r.Z)(x.from,"d MMM, yyyy",{locale:u.Z}):(0,a.jsx)("span",{children:"Seleccionar fechas"})]}),s&&(0,a.jsxs)("div",{className:"absolute top-full mt-2 bg-white rounded-lg shadow-lg p-4 z-50",children:[(0,a.jsx)(n._W,{mode:"range",defaultMonth:null==x?void 0:x.from,selected:x,onSelect:e=>{f(e),t(e)},numberOfMonths:2,locale:u.Z,formatters:{formatCaption:e=>(0,r.Z)(e,"MMMM yyyy",{locale:u.Z}).replace(/^\w/,e=>e.toUpperCase()),formatWeekdayName:e=>(0,r.Z)(e,"EEEEEE",{locale:u.Z}).toUpperCase()},components:{IconLeft:e=>{let{...t}=e;return(0,a.jsx)(c.Z,{className:"h-4 w-4",...t})},IconRight:e=>{let{...t}=e;return(0,a.jsx)(d.Z,{className:"h-4 w-4",...t})}},modifiers:{range:x},modifiersStyles:{range_start:{color:"white",backgroundColor:"#3b82f6"},range_end:{color:"white",backgroundColor:"#3b82f6"},range_middle:{color:"#1e3a8a",backgroundColor:"#eff6ff"}}}),(0,a.jsxs)("div",{className:"mt-4 flex justify-end gap-2",children:[(0,a.jsx)(i.z,{className:"bg-white hover:bg-gray-50 border border-gray-200",onClick:()=>{let e={from:new Date,to:new Date(new Date().getFullYear(),11,31)};f(e),t(e)},children:"Reiniciar"}),(0,a.jsx)(i.z,{className:"bg-blue-600 hover:bg-blue-700 text-white",onClick:()=>m(!1),children:"Cerrar"})]})]})]})}s(8377)},4935:function(e,t,s){"use strict";s.d(t,{p:function(){return n}});var a=s(7437),l=s(5863);function n(){return(0,a.jsxs)("div",{className:"h-screen flex flex-col items-center justify-center",children:[(0,a.jsx)(l.Z,{className:"h-8 w-8 animate-spin text-blue-500"}),(0,a.jsx)("p",{className:"mt-2 text-sm text-gray-500",children:"Loading..."})]})}},5660:function(e,t,s){"use strict";s.d(t,{Z:function(){return l}});var a=s(7437);function l(e){let{totalAdItems:t,availableSpaces:s,occupiedSpaces:l}=e;return(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,a.jsxs)("div",{className:"bg-white p-4 rounded-lg shadow",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-800",children:"Total Espacios"}),(0,a.jsx)("p",{className:"text-3xl font-bold text-blue-600",children:t})]}),(0,a.jsxs)("div",{className:"bg-white p-4 rounded-lg shadow",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-800",children:"Disponibles"}),(0,a.jsx)("p",{className:"text-3xl font-bold text-green-600",children:s})]}),(0,a.jsxs)("div",{className:"bg-white p-4 rounded-lg shadow",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-800",children:"Ocupados"}),(0,a.jsx)("p",{className:"text-3xl font-bold text-amber-600",children:l})]}),(0,a.jsxs)("div",{className:"bg-white p-4 rounded-lg shadow",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-800",children:"Utilizaci\xf3n"}),(0,a.jsxs)("p",{className:"text-3xl font-bold text-purple-600",children:[t?Math.round(l/t*100):0,"%"]})]})]})}},2443:function(e,t,s){"use strict";s.d(t,{p:function(){return i}});var a=s(7437),l=s(605),n=s(9376),r=s(4935);function i(e){let{children:t,allowedRoles:s}=e,{data:i,status:o}=(0,l.useSession)();return"loading"===o?(0,a.jsx)(r.p,{}):((null==i?void 0:i.user)&&s.includes(i.user.role)||(0,n.redirect)("/leasing"),(0,a.jsx)(a.Fragment,{children:t}))}},2595:function(e,t,s){"use strict";s.d(t,{z:function(){return r}});var a=s(7437),l=s(2265),n=s(4508);let r=l.forwardRef((e,t)=>{let{className:s,...l}=e;return(0,a.jsx)("button",{className:(0,n.cn)("inline-flex items-center justify-center rounded-md text-sm font-medium bg-primary text-primary-foreground hover:bg-primary/90 h-10 px-4 py-2",s),ref:t,...l})});r.displayName="Button"},1973:function(e,t,s){"use strict";s.d(t,{I:function(){return r}});var a=s(7437),l=s(2265),n=s(4508);let r=l.forwardRef((e,t)=>{let{className:s,type:l,...r}=e;return(0,a.jsx)("input",{type:l,className:(0,n.cn)("flex h-10 w-full rounded-md border bg-background px-3 py-2 text-sm",s),ref:t,...r})});r.displayName="Input"},1720:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return u}});var a=s(7437),l=s(2265),n=s(7648),r=s(5660),i=s(1973),o=s(3940),c=s(4935),d=s(2443);function u(){let[e,t]=(0,l.useState)([]),[s,u]=(0,l.useState)(!0),[m,x]=(0,l.useState)(""),[f,h]=(0,l.useState)({from:new Date,to:new Date(new Date().getFullYear(),11,31)});(0,l.useEffect)(()=>{(async()=>{try{u(!0);let e=await fetch("/api/media-item-types/stats");if(!e.ok)throw Error("Failed to fetch media item types");let s=await e.json();console.log("Fetched data:",s),t(s)}catch(e){console.error("Error fetching media item types:",e)}finally{u(!1)}})()},[]);let g=(0,l.useMemo)(()=>e.filter(e=>e.name.toLowerCase().includes(m.toLowerCase())).map(e=>{let t=e.mediaItems.flatMap(e=>e.mediaSpaces),s={total:t.length,inUse:t.filter(e=>{var t;return null===(t=e.leases)||void 0===t?void 0:t.some(e=>{if(!(null==f?void 0:f.from)||!(null==f?void 0:f.to))return!1;let t=new Date(e.startDate),s=new Date(e.endDate);return 7!==e.statusId&&t<=f.to&&s>=f.from})}).length,available:0};return s.available=s.total-s.inUse,{...e,stats:s}}),[e,m,f]),p=(0,l.useMemo)(()=>g.reduce((e,t)=>({total:e.total+t.stats.total,available:e.available+t.stats.available,inUse:e.inUse+t.stats.inUse}),{total:0,available:0,inUse:0}),[g]);return s?(0,a.jsx)(c.p,{}):(0,a.jsx)(d.p,{allowedRoles:["ADMIN","ASSOCIATE"],children:(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)(r.Z,{totalAdItems:p.total,availableSpaces:p.available,occupiedSpaces:p.inUse}),(0,a.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,a.jsx)("div",{className:"flex justify-between items-center mb-6",children:(0,a.jsx)("h1",{className:"text-2xl font-bold",children:"Tipos de Medios"})}),(0,a.jsxs)("div",{className:"flex gap-4 mb-6 items-center",children:[(0,a.jsx)("div",{className:"flex-none",children:(0,a.jsx)(o.r,{onDateRangeChange:h})}),(0,a.jsx)("div",{className:"flex-1",children:(0,a.jsx)(i.I,{placeholder:"Buscar tipos de medios...",value:m,onChange:e=>x(e.target.value),className:"w-full"})})]}),(0,a.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:g.map(e=>(0,a.jsx)(n.default,{href:"/dashboard/dashboard?mediaTypeId=".concat(e.id),className:"block",children:(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-md hover:shadow-xl transition-shadow duration-200 p-4",children:[(0,a.jsxs)("div",{className:"mb-2",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-800 truncate",children:e.name}),(0,a.jsxs)("p",{className:"text-sm text-gray-600 truncate",children:[e.mediaItems.length," productos diferentes"]})]}),(0,a.jsxs)("div",{className:"text-sm space-y-1",children:[(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-gray-600",children:"Total:"}),(0,a.jsx)("span",{className:"font-medium",children:e.stats.total})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-green-600",children:"Disponibles:"}),(0,a.jsx)("span",{className:"font-medium",children:e.stats.available})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-amber-600",children:" Ocupados:"}),(0,a.jsx)("span",{className:"font-medium",children:e.stats.inUse})]})]})]})},e.id))})]})]})})}},4508:function(e,t,s){"use strict";s.d(t,{cn:function(){return n}});var a=s(1994),l=s(3335);function n(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,l.m6)((0,a.W)(t))}},1047:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(9763).Z)("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]])},2451:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(9763).Z)("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]])},407:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(9763).Z)("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]])},5863:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(9763).Z)("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])}},function(e){e.O(0,[604,554,605,541,457,367,971,117,744],function(){return e(e.s=734)}),_N_E=e.O()}]);