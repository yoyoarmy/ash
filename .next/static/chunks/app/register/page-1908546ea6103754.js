(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[11],{4587:function(e,t,r){Promise.resolve().then(r.bind(r,2833))},4935:function(e,t,r){"use strict";r.d(t,{p:function(){return n}});var a=r(7437),s=r(5863);function n(){return(0,a.jsxs)("div",{className:"h-screen flex flex-col items-center justify-center",children:[(0,a.jsx)(s.Z,{className:"h-8 w-8 animate-spin text-blue-500"}),(0,a.jsx)("p",{className:"mt-2 text-sm text-gray-500",children:"Loading..."})]})}},2595:function(e,t,r){"use strict";r.d(t,{z:function(){return i}});var a=r(7437),s=r(2265),n=r(4508);let i=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("button",{className:(0,n.cn)("inline-flex items-center justify-center rounded-md text-sm font-medium bg-primary text-primary-foreground hover:bg-primary/90 h-10 px-4 py-2",r),ref:t,...s})});i.displayName="Button"},1973:function(e,t,r){"use strict";r.d(t,{I:function(){return i}});var a=r(7437),s=r(2265),n=r(4508);let i=s.forwardRef((e,t)=>{let{className:r,type:s,...i}=e;return(0,a.jsx)("input",{type:s,className:(0,n.cn)("flex h-10 w-full rounded-md border bg-background px-3 py-2 text-sm",r),ref:t,...i})});i.displayName="Input"},967:function(e,t,r){"use strict";r.d(t,{Bw:function(){return m},Ph:function(){return o},Ql:function(){return f},i4:function(){return c},ki:function(){return u}});var a=r(7437),s=r(2265),n=r(2286),i=r(875),l=r(401),d=r(4508);let o=n.fC,c=s.forwardRef((e,t)=>{let{className:r,children:s,...l}=e;return(0,a.jsxs)(n.xz,{ref:t,className:(0,d.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",r),...l,children:[s,(0,a.jsx)(i.Z,{className:"h-4 w-4 opacity-50"})]})});c.displayName=n.xz.displayName;let u=n.B4,m=s.forwardRef((e,t)=>{let{className:r,children:s,position:i="popper",...l}=e;return(0,a.jsx)(n.h_,{children:(0,a.jsx)(n.VY,{ref:t,className:(0,d.cn)("relative z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===i&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",r),position:i,...l,children:(0,a.jsx)(n.l_,{className:(0,d.cn)("p-1","popper"===i&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:s})})})});m.displayName=n.VY.displayName;let f=s.forwardRef((e,t)=>{let{className:r,children:s,...i}=e;return(0,a.jsxs)(n.ck,{ref:t,className:(0,d.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",r),...i,children:[(0,a.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,a.jsx)(n.wU,{children:(0,a.jsx)(l.Z,{className:"h-4 w-4"})})}),(0,a.jsx)(n.eT,{children:s})]})});f.displayName=n.ck.displayName},2833:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return u}});var a=r(7437),s=r(2265),n=r(9376),i=r(1973),l=r(2595),d=r(4935),o=r(605),c=r(967);function u(){let e=(0,n.useRouter)(),{data:t,status:r}=(0,o.useSession)(),[u,m]=(0,s.useState)(!1),[f,x]=(0,s.useState)(""),[h,p]=(0,s.useState)("ASSOCIATE");if("loading"===r)return(0,a.jsx)(d.p,{});(null==t?void 0:t.user)&&"ADMIN"===t.user.role||(0,n.redirect)("/login");let g=async t=>{t.preventDefault(),m(!0),x("");let r=new FormData(t.currentTarget),a={name:r.get("name"),email:r.get("email"),password:r.get("password"),role:h};try{if(!(await fetch("/api/auth/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)})).ok)throw Error("Registration failed");e.push("/login?registered=true")}catch(e){x("Failed to create account. Please try again.")}finally{m(!1)}};return u?(0,a.jsx)(d.p,{}):(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-100",children:(0,a.jsxs)("div",{className:"bg-white p-8 rounded-lg shadow-md w-96",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold mb-6 text-center",children:"Crear Cuenta de Usuario"}),f&&(0,a.jsx)("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4",children:f}),(0,a.jsxs)("form",{onSubmit:g,className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700",children:"Nombre"}),(0,a.jsx)(i.I,{id:"name",name:"name",type:"text",required:!0,className:"mt-1"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Email"}),(0,a.jsx)(i.I,{id:"email",name:"email",type:"email",required:!0,className:"mt-1"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"Contrase\xf1a"}),(0,a.jsx)(i.I,{id:"password",name:"password",type:"password",required:!0,className:"mt-1"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Rol del Usuario"}),(0,a.jsxs)(c.Ph,{value:h,onValueChange:e=>p(e),children:[(0,a.jsx)(c.i4,{className:"w-full bg-white",children:(0,a.jsx)(c.ki,{placeholder:"Seleccionar rol"})}),(0,a.jsxs)(c.Bw,{className:"bg-white",children:[(0,a.jsx)(c.Ql,{value:"ASSOCIATE",children:(0,a.jsxs)("div",{className:"flex flex-col",children:[(0,a.jsx)("span",{children:"Asociado"}),(0,a.jsx)("span",{className:"text-xs text-gray-500",children:"Puede gestionar tiendas y inventario"})]})}),(0,a.jsx)(c.Ql,{value:"ADVERTISER",children:(0,a.jsxs)("div",{className:"flex flex-col",children:[(0,a.jsx)("span",{children:"Cliente"}),(0,a.jsx)("span",{className:"text-xs text-gray-500",children:"Puede reservar espacios de publicidad"})]})})]})]})]}),(0,a.jsx)(l.z,{type:"submit",className:"w-full",children:"Crear Cuenta"})]})]})})}},4508:function(e,t,r){"use strict";r.d(t,{cn:function(){return n}});var a=r(1994),s=r(3335);function n(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,s.m6)((0,a.W)(t))}},9376:function(e,t,r){"use strict";var a=r(5475);r.o(a,"redirect")&&r.d(t,{redirect:function(){return a.redirect}}),r.o(a,"useParams")&&r.d(t,{useParams:function(){return a.useParams}}),r.o(a,"usePathname")&&r.d(t,{usePathname:function(){return a.usePathname}}),r.o(a,"useRouter")&&r.d(t,{useRouter:function(){return a.useRouter}}),r.o(a,"useSearchParams")&&r.d(t,{useSearchParams:function(){return a.useSearchParams}})}},function(e){e.O(0,[554,605,992,943,971,117,744],function(){return e(e.s=4587)}),_N_E=e.O()}]);