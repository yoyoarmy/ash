(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[912],{3038:function(e,a,t){Promise.resolve().then(t.bind(t,368))},4935:function(e,a,t){"use strict";t.d(a,{p:function(){return n}});var r=t(7437),i=t(5863);function n(){return(0,r.jsxs)("div",{className:"h-screen flex flex-col items-center justify-center",children:[(0,r.jsx)(i.Z,{className:"h-8 w-8 animate-spin text-blue-500"}),(0,r.jsx)("p",{className:"mt-2 text-sm text-gray-500",children:"Loading..."})]})}},2595:function(e,a,t){"use strict";t.d(a,{z:function(){return s}});var r=t(7437),i=t(2265),n=t(4508);let s=i.forwardRef((e,a)=>{let{className:t,...i}=e;return(0,r.jsx)("button",{className:(0,n.cn)("inline-flex items-center justify-center rounded-md text-sm font-medium bg-primary text-primary-foreground hover:bg-primary/90 h-10 px-4 py-2",t),ref:a,...i})});s.displayName="Button"},4029:function(e,a,t){"use strict";t.d(a,{Ol:function(){return l},Zb:function(){return s},aY:function(){return d},ll:function(){return o}});var r=t(7437),i=t(2265),n=t(4508);let s=i.forwardRef((e,a)=>{let{className:t,...i}=e;return(0,r.jsx)("div",{ref:a,className:(0,n.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",t),...i})});s.displayName="Card";let l=i.forwardRef((e,a)=>{let{className:t,...i}=e;return(0,r.jsx)("div",{ref:a,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",t),...i})});l.displayName="CardHeader";let o=i.forwardRef((e,a)=>{let{className:t,...i}=e;return(0,r.jsx)("h3",{ref:a,className:(0,n.cn)("text-2xl font-semibold leading-none tracking-tight",t),...i})});o.displayName="CardTitle";let d=i.forwardRef((e,a)=>{let{className:t,...i}=e;return(0,r.jsx)("div",{ref:a,className:(0,n.cn)("p-6 pt-0",t),...i})});d.displayName="CardContent"},3805:function(e,a,t){"use strict";t.d(a,{$N:function(){return p},GG:function(){return m},Vq:function(){return o},cZ:function(){return h},fK:function(){return f},hg:function(){return d}});var r=t(7437),i=t(2265),n=t(3475),s=t(2489),l=t(4508);let o=n.fC,d=n.xz,c=n.h_,m=n.x8,u=i.forwardRef((e,a)=>{let{className:t,...i}=e;return(0,r.jsx)(n.aV,{ref:a,className:(0,l.cn)("fixed inset-0 z-50 bg-black/50 backdrop-blur-sm data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...i})});u.displayName=n.aV.displayName;let h=i.forwardRef((e,a)=>{let{className:t,children:i,...o}=e;return(0,r.jsxs)(c,{children:[(0,r.jsx)(u,{}),(0,r.jsxs)(n.VY,{ref:a,className:(0,l.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-white p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...o,children:[i,(0,r.jsxs)(n.x8,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-white transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-gray-950 focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-gray-100 data-[state=open]:text-gray-500",children:[(0,r.jsx)(s.Z,{className:"h-4 w-4"}),(0,r.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});h.displayName=n.VY.displayName;let f=e=>{let{className:a,...t}=e;return(0,r.jsx)("div",{className:(0,l.cn)("flex flex-col space-y-1.5 text-center sm:text-left",a),...t})};f.displayName="DialogHeader";let p=i.forwardRef((e,a)=>{let{className:t,...i}=e;return(0,r.jsx)(n.Dx,{ref:a,className:(0,l.cn)("text-lg font-semibold leading-none tracking-tight",t),...i})});p.displayName=n.Dx.displayName},1973:function(e,a,t){"use strict";t.d(a,{I:function(){return s}});var r=t(7437),i=t(2265),n=t(4508);let s=i.forwardRef((e,a)=>{let{className:t,type:i,...s}=e;return(0,r.jsx)("input",{type:i,className:(0,n.cn)("flex h-10 w-full rounded-md border bg-background px-3 py-2 text-sm",t),ref:a,...s})});s.displayName="Input"},6393:function(e,a,t){"use strict";t.d(a,{_:function(){return s}});var r=t(7437),i=t(2265),n=t(4508);let s=i.forwardRef((e,a)=>{let{className:t,...i}=e;return(0,r.jsx)("label",{ref:a,className:(0,n.cn)("text-sm font-medium leading-none",t),...i})});s.displayName="Label"},967:function(e,a,t){"use strict";t.d(a,{Bw:function(){return u},Ph:function(){return d},Ql:function(){return h},i4:function(){return c},ki:function(){return m}});var r=t(7437),i=t(2265),n=t(2286),s=t(875),l=t(401),o=t(4508);let d=n.fC,c=i.forwardRef((e,a)=>{let{className:t,children:i,...l}=e;return(0,r.jsxs)(n.xz,{ref:a,className:(0,o.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),...l,children:[i,(0,r.jsx)(s.Z,{className:"h-4 w-4 opacity-50"})]})});c.displayName=n.xz.displayName;let m=n.B4,u=i.forwardRef((e,a)=>{let{className:t,children:i,position:s="popper",...l}=e;return(0,r.jsx)(n.h_,{children:(0,r.jsx)(n.VY,{ref:a,className:(0,o.cn)("relative z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===s&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:s,...l,children:(0,r.jsx)(n.l_,{className:(0,o.cn)("p-1","popper"===s&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:i})})})});u.displayName=n.VY.displayName;let h=i.forwardRef((e,a)=>{let{className:t,children:i,...s}=e;return(0,r.jsxs)(n.ck,{ref:a,className:(0,o.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...s,children:[(0,r.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,r.jsx)(n.wU,{children:(0,r.jsx)(l.Z,{className:"h-4 w-4"})})}),(0,r.jsx)(n.eT,{children:i})]})});h.displayName=n.ck.displayName},7147:function(e,a,t){"use strict";t.d(a,{FN:function(){return c},VW:function(){return o},_i:function(){return d},sA:function(){return m}});var r=t(7437),i=t(2265),n=t(653),s=t(536),l=t(4508);let o=s.zt,d=i.forwardRef((e,a)=>{let{className:t,...i}=e;return(0,r.jsx)(s.l_,{ref:a,className:(0,l.cn)("fixed top-0 right-0 p-4 flex flex-col gap-2 w-[390px] max-w-[100vw] z-[100]",t),...i})});d.displayName=s.l_.displayName;let c=i.forwardRef((e,a)=>{let{className:t,...i}=e;return(0,r.jsx)(s.fC,{ref:a,className:(0,l.cn)("bg-white rounded-lg shadow-lg p-4 flex items-center gap-4",t),...i})});c.displayName=s.fC.displayName;let m=i.forwardRef((e,a)=>{let{className:t,...i}=e;return(0,r.jsx)(s.x8,{ref:a,className:(0,l.cn)("text-gray-400 hover:text-gray-500",t),"toast-close":"",...i,children:(0,r.jsx)(n.Pxu,{className:"h-4 w-4"})})});m.displayName=s.x8.displayName},5681:function(e,a,t){"use strict";t.d(a,{CartProvider:function(){return s},j:function(){return l}});var r=t(7437),i=t(2265);let n=(0,i.createContext)({items:[],itemCount:0,addItem:()=>{},removeItem:()=>{},clearCart:()=>{},formData:null,setFormData:()=>{}});function s(e){let{children:a}=e,[t,s]=(0,i.useState)([]),[l,o]=(0,i.useState)(null);return(0,r.jsx)(n.Provider,{value:{items:t,formData:l,addItem:e=>{var a,t;console.log("Adding item to cart with planAlaMedida:",{planAlaMedida:e.extraInformation.planAlaMedida,planAlaMedidaAmount:e.extraInformation.planAlaMedidaAmount});let r={...e,extraInformation:{...e.extraInformation,planAlaMedida:null!==(a=e.extraInformation.planAlaMedida)&&void 0!==a?a:null,planAlaMedidaAmount:null!==(t=e.extraInformation.planAlaMedidaAmount)&&void 0!==t?t:null}};console.log("Processed cart item:",r),s(e=>[...e,r])},removeItem:e=>{s(a=>a.filter(a=>a.spaceId!==e))},clearCart:()=>{s([])},setFormData:o,itemCount:t.length},children:a})}function l(){let e=(0,i.useContext)(n);if(void 0===e)throw Error("useCart must be used within a CartProvider");return e}},7081:function(e,a,t){"use strict";t.d(a,{J:function(){return l},z:function(){return o}});var r=t(7437),i=t(2265);let n=(0,i.createContext)(void 0),s={"Lease successfully created":"Solicitud creada exitosamente","Failed to create lease":"Error al crear la solicitud","Lease successfully revoked":"Solicitud revocada exitosamente","Failed to revoke lease":"Error al revocar la solicitud","Store updated successfully":"Tienda actualizada exitosamente","Failed to update store":"Error al actualizar la tienda","Media space updated":"Espacio publicitario actualizado","Failed to update media space":"Error al actualizar el espacio publicitario"};function l(e){let{children:a}=e,[t,l]=(0,i.useState)([]),o=t.filter(e=>!e.read).length;return(0,r.jsx)(n.Provider,{value:{notifications:t,addNotification:e=>{let a=s[e]||e,t={id:Date.now().toString(),message:a,timestamp:new Date,read:!1};l(e=>[t,...e])},markAsRead:e=>{l(a=>a.map(a=>a.id===e?{...a,read:!0}:a))},clearNotification:e=>{l(a=>a.filter(a=>a.id!==e))},unreadCount:o},children:a})}let o=()=>{let e=(0,i.useContext)(n);if(void 0===e)throw Error("useNotifications must be used within a NotificationProvider");return e}},368:function(e,a,t){"use strict";t.r(a),t.d(a,{default:function(){return D}});var r=t(7437),i=t(2265),n=t(4029),s=t(1973),l=t(6393),o=t(2595),d=t(967),c=t(3246),m=t(9735),u=t(9635),h=t(7656);function f(e,a){var t=e.getFullYear()-a.getFullYear()||e.getMonth()-a.getMonth()||e.getDate()-a.getDate()||e.getHours()-a.getHours()||e.getMinutes()-a.getMinutes()||e.getSeconds()-a.getSeconds()||e.getMilliseconds()-a.getMilliseconds();return t<0?-1:t>0?1:t}function p(e,a){(0,h.Z)(2,arguments);var t=(0,m.Z)(e),r=(0,m.Z)(a),i=f(t,r),n=Math.abs((0,u.Z)(t,r));t.setDate(t.getDate()-i*n);var s=Number(f(t,r)===-i),l=i*(n-s);return 0===l?0:l}var g=t(5721),x=t(3903),v=t(3541);t(8377);var b=t(7081),y=t(7147),j=t(5302),w=t(4935),N=t(605),I=t(9048),C=t(5681),S=t(3805),M=t(2208);function D(){var e;let{data:a}=(0,N.useSession)(),[t,m]=(0,i.useState)(""),[u,h]=(0,i.useState)([]),[f,D]=(0,i.useState)(""),[k,A]=(0,i.useState)([]),[P,E]=(0,i.useState)(""),[Z,T]=(0,i.useState)([]),[R,z]=(0,i.useState)(null),[W,_]=(0,i.useState)({from:void 0,to:void 0}),[F,V]=(0,i.useState)(!1),[O,L]=(0,i.useState)(void 0),{addNotification:U}=(0,b.z)(),[G,H]=(0,i.useState)({show:!1,message:""}),[q,Y]=(0,i.useState)([]),[B,X]=(0,i.useState)(!1),[Q,$]=(0,i.useState)(!0),[J,K]=(0,i.useState)(!1),[ee,ea]=(0,i.useState)(!1),[et,er]=(0,i.useState)([]),[ei,en]=(0,i.useState)(""),[es,el]=(0,i.useState)(!1),[eo,ed]=(0,i.useState)(""),[ec,em]=(0,i.useState)([]),[eu,eh]=(0,i.useState)(!0),[ef,ep]=(0,i.useState)([]),[eg,ex]=(0,i.useState)([]),{addItem:ev,formData:eb,setFormData:ey}=(0,C.j)(),[ej,ew]=(0,i.useState)(""),[eN,eI]=(0,i.useState)(""),[eC,eS]=(0,i.useState)(new Map),[eM,eD]=(0,i.useState)(!1),[ek,eA]=(0,i.useState)({url:"",amount:""});(0,i.useEffect)(()=>{var e;if((null==a?void 0:null===(e=a.user)||void 0===e?void 0:e.role)==="ADVERTISER"){let e=a.user.name||"";m(e),ey(a=>a?{...a,customerName:e}:null)}},[a]),(0,i.useEffect)(()=>{$(!0),fetch("/api/brands").then(e=>e.json()).then(e=>h(e)).catch(e=>console.error("Failed to fetch brands:",e)).finally(()=>$(!1))},[]),(0,i.useEffect)(()=>{(async()=>{try{let e=await fetch("/api/media-item-types"),a=await e.json();console.log("Fetched media item types:",a),em(a)}catch(e){console.error("Error fetching media item types:",e)}finally{eh(!1)}})()},[]),(0,i.useEffect)(()=>{P&&eo&&(async()=>{el(!0);try{console.log("Fetching media items for:",{storeId:P,typeId:eo});let e=await fetch("/api/media-items?storeId=".concat(P,"&typeId=").concat(eo)),a=await e.json();console.log("Fetched media items:",a),er(a)}catch(e){console.error("Error fetching media items:",e)}finally{el(!1)}})()},[P,eo]),(0,i.useEffect)(()=>{f&&eo&&(K(!0),fetch("/api/stores").then(e=>e.json()).then(e=>{let a=e.filter(e=>e.brandId.toString()===f&&e.mediaSpaces.some(e=>e.mediaItem.mediaItemType.id.toString()===eo));console.log("Filtered stores:",a),A(a),E("")}).catch(e=>console.error("Failed to fetch stores:",e)).finally(()=>K(!1)))},[f,eo]),(0,i.useEffect)(()=>{P&&ei&&ez(P)},[P,ei]),(0,i.useEffect)(()=>{R&&fetch("/api/spaces/".concat(R.id,"/availability")).then(e=>e.json()).then(e=>{console.log("Availability data:",e);let a=e.dateCapacities.filter(e=>e.activeLeases>=R.mediaItem.capacity).map(e=>({start:new Date(e.date),end:new Date(e.date)}));console.log("Blocked dates:",a),Y(a)}).catch(e=>{console.error("Failed to fetch availability:",e),U("Error al cargar disponibilidad")})},[R]);let eP=async(e,a)=>{try{eD(!0);let t=await fetch("/api/spaces/".concat(null==R?void 0:R.id,"/availability-range?")+new URLSearchParams({start:e.toISOString(),end:a.toISOString()}));if(!t.ok)throw Error("Failed to fetch availability");let r=await t.json(),i=new Map(eC);r.dates.forEach(e=>{let{date:a,isAvailable:t}=e;i.set(a,t)}),eS(i)}catch(e){console.error("Error fetching availability:",e),U("Error al cargar disponibilidad")}finally{eD(!1)}},eE=e=>{let a=e.toISOString().split("T")[0];return!eC.has(a)||eC.get(a)};(0,i.useEffect)(()=>{if(R&&F){let e=new Date,a=new Date;a.setMonth(e.getMonth()+3),eP(e,a)}},[R,F]);let eZ=(e,a)=>{let t=[],r=1;for(;t.length<52;){let i=(0,g.Z)(e,a*r-1),n=!0;for(let a=e;a<=i;a=(0,g.Z)(a,1))if(!eE(a)){n=!1;break}n&&t.push(i),r++}return t},eT=()=>R&&W.from&&W.to?eR(R.mediaItem.mediaItemType.id)?eN?parseFloat(eN):0:Math.floor((p(W.to,W.from)+1)/R.mediaItem.leaseDuration)*R.mediaItem.basePrice:0,eR=e=>{let a=7===e;return console.log("isPlanAlaMedida check:",{mediaTypeId:e,result:a}),a},ez=async e=>{ea(!0);try{let a=await fetch("/api/inventory?storeId=".concat(e,"&mediaItemId=").concat(ei)),t=await a.json();console.log("Fetched inventory:",t),T(t)}catch(e){console.error("Failed to fetch inventory:",e)}finally{ea(!1)}};(0,i.useEffect)(()=>{f&&(async()=>{try{let e=await fetch("/api/stores?brandId=".concat(f)),a=await e.json(),t=new Set;a.forEach(e=>{e.mediaSpaces.forEach(e=>{var a;(null===(a=e.mediaItem)||void 0===a?void 0:a.mediaItemType)&&t.add(JSON.stringify(e.mediaItem.mediaItemType))})});let r=Array.from(t).map(e=>JSON.parse(e));ep(r),A(a)}catch(e){console.error("Error fetching data:",e)}})()},[f]);let eW=(e,a)=>{let t=[];for(let s of e)for(let e of s.mediaSpaces){var r,i,n;(null===(i=e.mediaItem)||void 0===i?void 0:null===(r=i.mediaItemType)||void 0===r?void 0:r.id.toString())===a&&t.push({...e,storeName:s.name,storeLocation:s.location,upcomingLeases:e.leases||[],currentLease:null===(n=e.leases)||void 0===n?void 0:n.find(e=>"Completed"!==e.status&&new Date(e.endDate)>=new Date)})}return t};(0,i.useEffect)(()=>{f&&eo&&k.length&&ex(eW(k,eo))},[f,eo,k]),(0,i.useEffect)(()=>{eb||ey({customerName:t,providerInfo:"",productDetails:"",campaignRedirect:"",marketingGoals:"",disclaimer:"",productUrl:"",targetAudience:"",brandGraphics:"",providerContact:"",billingType:[],giftCampaignDetails:"",planAlaMedida:"",planAlaMedidaAmount:0})},[t,eb]);let e_=(e,a)=>{eA(t=>({...t,[e]:a})),"url"===e?(ew(a),ey(e=>({...e,planAlaMedida:a}))):"amount"===e&&(eI(a),ey(e=>({...e,planAlaMedidaAmount:a?parseFloat(a):null})))};return B?(0,r.jsx)(w.p,{}):(0,r.jsxs)(y.VW,{children:[(0,r.jsxs)("div",{className:"p-6 bg-gray-100 min-h-screen",children:[(0,r.jsx)("h1",{className:"text-2xl font-bold mb-6",children:"Nueva Solicitud"}),(0,r.jsxs)("div",{className:"max-w-4xl mx-auto space-y-6",children:[(0,r.jsxs)(n.Zb,{className:"bg-white shadow-md",children:[(0,r.jsx)(n.Ol,{className:"border-b border-gray-100",children:(0,r.jsx)(n.ll,{className:"text-xl text-gray-800",children:"Informaci\xf3n B\xe1sica"})}),(0,r.jsxs)(n.aY,{className:"space-y-4 p-6 bg-white",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(l._,{children:"Nombre del Cliente"}),(0,r.jsx)(s.I,{value:t,onChange:e=>{let a=e.target.value;m(a),ey(e=>e?{...e,customerName:a}:null)},placeholder:"Ingrese nombre del cliente",disabled:(null==a?void 0:null===(e=a.user)||void 0===e?void 0:e.role)==="ADVERTISER",required:!0})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(l._,{children:"Informaci\xf3n del Proveedor"}),(0,r.jsx)(s.I,{value:(null==eb?void 0:eb.providerInfo)||"",onChange:e=>ey(a=>({...a,providerInfo:e.target.value})),placeholder:"Proveedor (Incluir nombre y C\xf3digo externo de Aludra) + Marca"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(l._,{children:"Detalles del Producto"}),(0,r.jsx)(s.I,{value:(null==eb?void 0:eb.productDetails)||"",onChange:e=>ey(a=>({...a,productDetails:e.target.value})),placeholder:"Producto que se desea destacar dentro de la marca (Nombre + SKU)"})]})]})]}),(0,r.jsxs)(n.Zb,{className:"bg-white shadow-md",children:[(0,r.jsx)(n.Ol,{className:"border-b border-gray-100",children:(0,r.jsx)(n.ll,{className:"text-xl text-gray-800",children:"Detalles de Campa\xf1a"})}),(0,r.jsxs)(n.aY,{className:"space-y-4 p-6 bg-white",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(l._,{children:"Redirecci\xf3n de Campa\xf1a"}),(0,r.jsxs)(d.Ph,{value:(null==eb?void 0:eb.campaignRedirect)||"",onValueChange:e=>ey(a=>({...a,campaignRedirect:e})),children:[(0,r.jsx)(d.i4,{className:"w-full bg-white",children:(0,r.jsx)(d.ki,{placeholder:"Seleccione la redirecci\xf3n de la campa\xf1a"})}),(0,r.jsxs)(d.Bw,{className:"bg-white",children:[(0,r.jsx)(d.Ql,{value:"Agrupado",children:"Agrupado"}),(0,r.jsx)(d.Ql,{value:"No Aplica",children:"No Aplica"}),(0,r.jsx)(d.Ql,{value:"Producto Unico",children:"Producto Unico"})]})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(l._,{children:"Objetivos de Marketing"}),(0,r.jsx)("textarea",{className:"w-full p-2 border rounded-md",value:(null==eb?void 0:eb.marketingGoals)||"",onChange:e=>ey(a=>({...a,marketingGoals:e.target.value})),placeholder:"\xbfA nivel comercial, que NO puede hacer falta en el arte promocional? \xbfQu\xe9 necesitas lograr con esta comunicaci\xf3n?",rows:4})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(l._,{children:"Disclaimer"}),(0,r.jsx)("textarea",{className:"w-full p-2 border rounded-md",value:(null==eb?void 0:eb.disclaimer)||"",onChange:e=>ey(a=>({...a,disclaimer:e.target.value})),placeholder:"Inserte el disclaimer que debe llevar el arte promocional",rows:3})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(l._,{children:"URL del Producto"}),(0,r.jsx)(s.I,{type:"url",name:"productUrl",value:(null==eb?void 0:eb.productUrl)||"",onChange:e=>ey(a=>({...a,productUrl:e.target.value})),placeholder:"URL del producto"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(l._,{children:"P\xfablico Objetivo"}),(0,r.jsx)("textarea",{className:"w-full p-2 border rounded-md",value:(null==eb?void 0:eb.targetAudience)||"",onChange:e=>ey(a=>({...a,targetAudience:e.target.value})),placeholder:"Especifica a quienes quisieras dirigir esta comunicaci\xf3n. Trata de ser muy detallado. (Ej. Cliente final o contratista, interesados en algo en particular, de cierta edad, g\xe9nero, etc)",rows:4})]})]})]}),(0,r.jsxs)(n.Zb,{className:"bg-white shadow-md",children:[(0,r.jsx)(n.Ol,{className:"border-b border-gray-100",children:(0,r.jsx)(n.ll,{className:"text-xl text-gray-800",children:"Informaci\xf3n Adicional"})}),(0,r.jsxs)(n.aY,{className:"space-y-4 p-6 bg-white",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(l._,{children:"Linea Gr\xe1fica"}),(0,r.jsx)(s.I,{value:(null==eb?void 0:eb.brandGraphics)||"",onChange:e=>ey(a=>({...a,brandGraphics:e.target.value})),placeholder:"Si el proveedor ha solicitado usar su l\xednea gr\xe1fica, ingresa link del drive, WeTransfer o Dropbox con el material"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(l._,{children:"Contacto del Proveedor"}),(0,r.jsx)(s.I,{value:(null==eb?void 0:eb.providerContact)||"",onChange:e=>ey(a=>({...a,providerContact:e.target.value})),placeholder:"Contacto del proveedor para que se le env\xede la informaci\xf3n"})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(l._,{children:"Se debe facturar"}),(0,r.jsxs)("div",{className:"space-x-4",children:[(0,r.jsxs)("label",{className:"inline-flex items-center",children:[(0,r.jsx)("input",{type:"checkbox",checked:(null==eb?void 0:eb.billingType.includes("INVOICE"))||!1,onChange:e=>{let a=e.target.checked?[...eb.billingType,"INVOICE"]:eb.billingType.filter(e=>"INVOICE"!==e);ey(e=>({...e,billingType:a}))},className:"form-checkbox"}),(0,r.jsx)("span",{className:"ml-2",children:"Se debe facturar"})]}),(0,r.jsxs)("label",{className:"inline-flex items-center",children:[(0,r.jsx)("input",{type:"checkbox",checked:(null==eb?void 0:eb.billingType.includes("GIFT"))||!1,onChange:e=>{let a=e.target.checked?[...eb.billingType,"GIFT"]:eb.billingType.filter(e=>"GIFT"!==e);ey(e=>({...e,billingType:a}))},className:"form-checkbox"}),(0,r.jsx)("span",{className:"ml-2",children:"Es Regalia"})]})]})]}),(null==eb?void 0:eb.billingType.includes("GIFT"))&&(0,r.jsxs)("div",{children:[(0,r.jsx)(l._,{children:"Regalia"}),(0,r.jsx)(s.I,{value:(null==eb?void 0:eb.giftCampaignDetails)||"",onChange:e=>ey(a=>({...a,giftCampaignDetails:e.target.value})),placeholder:"Si es regal\xeda especificar a qu\xe9 campa\xf1a corresponde. "})]})]})]}),(0,r.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[(0,r.jsx)(l._,{className:"text-gray-700",children:"Seleccionar Marca"}),(0,r.jsxs)(d.Ph,{value:f,onValueChange:e=>{D(e),E(""),T([]),z(null),V(!1)},disabled:Q,children:[(0,r.jsx)(d.i4,{className:"mt-1 w-full border-gray-200",children:(0,r.jsx)(d.ki,{placeholder:Q?"Cargando marcas...":"Seleccione una marca"})}),(0,r.jsx)(d.Bw,{className:"bg-white",children:u.map(e=>(0,r.jsx)(d.Ql,{value:e.id.toString(),className:"hover:bg-gray-50",children:e.name},e.id))})]})]}),f&&(0,r.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[(0,r.jsx)(l._,{className:"text-gray-700",children:"Tipo de Medio"}),(0,r.jsxs)(d.Ph,{value:eo,onValueChange:ed,children:[(0,r.jsx)(d.i4,{className:"mt-1 w-full border-gray-200",children:(0,r.jsx)(d.ki,{placeholder:"Seleccione tipo de medio"})}),(0,r.jsx)(d.Bw,{className:"bg-white",children:ef.map(e=>(0,r.jsx)(d.Ql,{value:e.id.toString(),className:"hover:bg-gray-50",children:e.name},e.id))})]})]}),eo&&eR(parseInt(eo))&&(0,r.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[(0,r.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Plan a la Medida - Informaci\xf3n Adicional"}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("label",{className:"text-sm font-medium text-gray-700",children:"URL del Plan"}),(0,r.jsx)(s.I,{placeholder:"Ingrese la URL del plan...",value:ek.url,onChange:e=>e_("url",e.target.value),required:!0,className:"w-full"})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("label",{className:"text-sm font-medium text-gray-700",children:"Monto del Plan"}),(0,r.jsx)(s.I,{type:"number",step:"0.01",placeholder:"Ingrese el monto...",value:ek.amount,onChange:e=>e_("amount",e.target.value),required:!0,className:"w-full"})]})]})]}),f&&eo&&(0,r.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[(0,r.jsx)(l._,{className:"text-gray-700",children:"Inventario Disponible"}),ee?(0,r.jsx)("div",{className:"text-center py-6 text-gray-500",children:"Cargando inventario..."}):eg.length>0?(0,r.jsx)("div",{className:"mt-2 space-y-3",children:eg.map(e=>{var a;return(0,r.jsxs)("button",{className:"w-full text-left p-4 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors duration-150",onClick:()=>{console.log("Space selected:",e),z(e),_({from:void 0,to:void 0}),V(!0)},children:[(0,r.jsxs)("div",{className:"flex justify-between items-start",children:[(0,r.jsxs)("h3",{className:"font-medium text-gray-800",children:[e.mediaItem.type,"  |  ",e.storeName]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[e.photo&&(0,r.jsxs)(S.Vq,{children:[(0,r.jsx)(S.hg,{asChild:!0,children:(0,r.jsx)(o.z,{variant:"ghost",size:"sm",className:"text-gray-400 hover:text-blue-700",onClick:e=>e.stopPropagation(),children:(0,r.jsx)(M.Z,{className:"h-4 w-4"})})}),(0,r.jsxs)(S.cZ,{className:"max-w-3xl",children:[(0,r.jsx)(S.fK,{children:(0,r.jsx)(S.$N,{children:"Vista Previa de Foto"})}),(0,r.jsx)("div",{className:"relative aspect-video",children:(0,r.jsx)("img",{src:e.photo,alt:"".concat(e.mediaItem.type," preview"),className:"w-full h-full object-contain",onError:a=>{console.error("Error loading image:",e.photo),a.currentTarget.src="/placeholder-image.jpg"}})})]})]}),(0,r.jsx)("span",{className:"px-2 py-1 rounded text-sm ".concat(e.isAtCapacity?"bg-yellow-100 text-yellow-800":"bg-green-100 text-green-800"),children:e.isAtCapacity?"No Disponible":"Disponible"})]})]}),(0,r.jsxs)("div",{className:"mt-2 grid grid-cols-2 gap-2 text-sm text-gray-600",children:[(0,r.jsxs)("p",{children:["Dimensiones: ",e.mediaItem.dimensions]}),(0,r.jsxs)("p",{children:["Precio Base: $",e.mediaItem.basePrice]}),(0,r.jsxs)("p",{children:["Duraci\xf3n del Arriendo: ",e.mediaItem.leaseDuration," d\xedas"]})]}),(null===(a=e.upcomingLeases)||void 0===a?void 0:a.length)>0&&(0,r.jsxs)("div",{className:"mt-2 pt-2 border-t border-gray-100",children:[(0,r.jsx)("p",{className:"text-sm font-medium text-gray-700",children:"Arriendos Pr\xf3ximos:"}),e.upcomingLeases.map((e,a)=>(0,r.jsxs)("p",{className:"text-sm text-gray-600",children:[(0,v.Z)(new Date(e.startDate),"d MMM",{locale:I.Z})," - ",(0,v.Z)(new Date(e.endDate),"d MMM yyyy",{locale:I.Z})]},a))]})]},e.id)})}):(0,r.jsx)("div",{className:"text-center py-6 text-gray-500",children:"No hay espacios disponibles para este tipo de medio"})]})]}),F&&R&&(0,r.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:(0,r.jsxs)("div",{className:"bg-white rounded-lg p-6 max-w-[800px] w-full shadow-xl",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,r.jsx)("h3",{className:"text-lg font-medium",children:"Seleccionar Fechas"}),(0,r.jsx)("button",{onClick:()=>{V(!1),L(void 0),_({from:void 0,to:void 0})},className:"text-gray-500 hover:text-gray-700",children:"✕"})]}),(0,r.jsxs)("div",{className:"mb-4",children:[(0,r.jsx)("p",{className:"text-sm text-gray-600 mb-2",children:O?"Seleccione fecha final (debe ser en incrementos de ".concat(R.mediaItem.leaseDuration," d\xedas)"):"Seleccione fecha de inicio"}),(0,r.jsx)("div",{className:"bg-white p-4 rounded-lg",children:(0,r.jsx)(c._W,{mode:"single",selected:W.from,onSelect:e=>{R&&e&&(O?eZ(O,R.mediaItem.leaseDuration).some(a=>(0,x.Z)(a,e))?_({from:O,to:e}):U("Por favor seleccione una fecha v\xe1lida basada en la duraci\xf3n del arriendo de ".concat(R.mediaItem.leaseDuration," d\xedas")):eE(e)?(L(e),_({from:e,to:void 0})):U("Esta fecha no est\xe1 disponible - capacidad alcanzada"))},numberOfMonths:2,fromDate:new Date,toDate:(0,g.Z)(new Date,365),locale:I.Z,modifiers:{disabled:[{before:new Date},O&&{after:(0,g.Z)(O,365)},...q.map(e=>({from:new Date(e.start),to:new Date(e.end)}))].filter(Boolean),highlighted:O?eZ(O,R.mediaItem.leaseDuration):[]},modifiersStyles:{highlighted:{backgroundColor:"#e0f2fe",borderRadius:"100%"},disabled:{backgroundColor:"#fee2e2",borderRadius:"100%",color:"#991b1b"}},formatters:{formatCaption:(e,a)=>(0,v.Z)(e,"MMMM yyyy",{locale:I.Z}).replace(/^\w/,e=>e.toUpperCase()),formatWeekdayName:e=>(0,v.Z)(e,"EEEEEE",{locale:I.Z}).toUpperCase()},className:"bg-white mx-auto"})})]}),W.from&&W.to&&(0,r.jsxs)("div",{className:"mt-4 space-y-2",children:[(0,r.jsxs)("p",{className:"text-sm text-gray-600",children:["Duraci\xf3n seleccionada: ",p(W.to,W.from)+1," d\xedas"]}),(0,r.jsxs)("p",{className:"text-sm text-gray-600",children:["Monto del arriendo: $",eT().toLocaleString()]}),(0,r.jsx)(o.z,{className:"w-full mt-2 bg-blue-600 hover:bg-blue-700 text-white",onClick:()=>{var e;if(!R||!W.from||!W.to)return;let a={customerName:t,providerInfo:(null==eb?void 0:eb.providerInfo)||"",productDetails:(null==eb?void 0:eb.productDetails)||"",campaignRedirect:(null==eb?void 0:eb.campaignRedirect)||"",marketingGoals:(null==eb?void 0:eb.marketingGoals)||"",disclaimer:(null==eb?void 0:eb.disclaimer)||"",productUrl:(null==eb?void 0:eb.productUrl)||"",targetAudience:(null==eb?void 0:eb.targetAudience)||"",brandGraphics:(null==eb?void 0:eb.brandGraphics)||"",providerContact:(null==eb?void 0:eb.providerContact)||"",billingType:(null==eb?void 0:eb.billingType)||[],giftCampaignDetails:(null==eb?void 0:eb.giftCampaignDetails)||"",planAlaMedida:(null==eb?void 0:eb.planAlaMedida)||"",planAlaMedidaAmount:eN?parseFloat(eN):null};console.log("Adding to cart with data:",a),ev({spaceId:R.id,storeName:(null===(e=R.store)||void 0===e?void 0:e.name)||"",mediaType:R.mediaItem.type,startDate:W.from,endDate:W.to,amount:eT(),extraInformation:a}),z(null),_({from:void 0,to:void 0}),V(!1),ew(""),eI(""),U("Agregado al carrito correctamente")},disabled:B,children:"Agregar al carrito"})]})]})})]}),G.show&&(0,r.jsx)(y.FN,{className:"fixed top-4 right-4 z-50 bg-green-50 border border-green-100 animate-slide-in",children:(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(j.Z,{className:"h-5 w-5 text-green-500"}),(0,r.jsx)("div",{className:"flex-1 text-sm font-medium text-green-800",children:G.message})]})}),(0,r.jsx)(y._i,{})]})}},4508:function(e,a,t){"use strict";t.d(a,{cn:function(){return n}});var r=t(1994),i=t(3335);function n(){for(var e=arguments.length,a=Array(e),t=0;t<e;t++)a[t]=arguments[t];return(0,i.m6)((0,r.W)(a))}},9048:function(e,a,t){"use strict";t.d(a,{Z:function(){return u}});var r={lessThanXSeconds:{one:"menos de un segundo",other:"menos de {{count}} segundos"},xSeconds:{one:"1 segundo",other:"{{count}} segundos"},halfAMinute:"medio minuto",lessThanXMinutes:{one:"menos de un minuto",other:"menos de {{count}} minutos"},xMinutes:{one:"1 minuto",other:"{{count}} minutos"},aboutXHours:{one:"alrededor de 1 hora",other:"alrededor de {{count}} horas"},xHours:{one:"1 hora",other:"{{count}} horas"},xDays:{one:"1 d\xeda",other:"{{count}} d\xedas"},aboutXWeeks:{one:"alrededor de 1 semana",other:"alrededor de {{count}} semanas"},xWeeks:{one:"1 semana",other:"{{count}} semanas"},aboutXMonths:{one:"alrededor de 1 mes",other:"alrededor de {{count}} meses"},xMonths:{one:"1 mes",other:"{{count}} meses"},aboutXYears:{one:"alrededor de 1 a\xf1o",other:"alrededor de {{count}} a\xf1os"},xYears:{one:"1 a\xf1o",other:"{{count}} a\xf1os"},overXYears:{one:"m\xe1s de 1 a\xf1o",other:"m\xe1s de {{count}} a\xf1os"},almostXYears:{one:"casi 1 a\xf1o",other:"casi {{count}} a\xf1os"}},i=t(3186),n={date:(0,i.Z)({formats:{full:"EEEE, d 'de' MMMM 'de' y",long:"d 'de' MMMM 'de' y",medium:"d MMM y",short:"dd/MM/y"},defaultWidth:"full"}),time:(0,i.Z)({formats:{full:"HH:mm:ss zzzz",long:"HH:mm:ss z",medium:"HH:mm:ss",short:"HH:mm"},defaultWidth:"full"}),dateTime:(0,i.Z)({formats:{full:"{{date}} 'a las' {{time}}",long:"{{date}} 'a las' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},defaultWidth:"full"})},s={lastWeek:"'el' eeee 'pasado a la' p",yesterday:"'ayer a la' p",today:"'hoy a la' p",tomorrow:"'ma\xf1ana a la' p",nextWeek:"eeee 'a la' p",other:"P"},l={lastWeek:"'el' eeee 'pasado a las' p",yesterday:"'ayer a las' p",today:"'hoy a las' p",tomorrow:"'ma\xf1ana a las' p",nextWeek:"eeee 'a las' p",other:"P"},o=t(9996),d={ordinalNumber:function(e,a){return Number(e)+"\xba"},era:(0,o.Z)({values:{narrow:["AC","DC"],abbreviated:["AC","DC"],wide:["antes de cristo","despu\xe9s de cristo"]},defaultWidth:"wide"}),quarter:(0,o.Z)({values:{narrow:["1","2","3","4"],abbreviated:["T1","T2","T3","T4"],wide:["1\xba trimestre","2\xba trimestre","3\xba trimestre","4\xba trimestre"]},defaultWidth:"wide",argumentCallback:function(e){return Number(e)-1}}),month:(0,o.Z)({values:{narrow:["e","f","m","a","m","j","j","a","s","o","n","d"],abbreviated:["ene","feb","mar","abr","may","jun","jul","ago","sep","oct","nov","dic"],wide:["enero","febrero","marzo","abril","mayo","junio","julio","agosto","septiembre","octubre","noviembre","diciembre"]},defaultWidth:"wide"}),day:(0,o.Z)({values:{narrow:["d","l","m","m","j","v","s"],short:["do","lu","ma","mi","ju","vi","s\xe1"],abbreviated:["dom","lun","mar","mi\xe9","jue","vie","s\xe1b"],wide:["domingo","lunes","martes","mi\xe9rcoles","jueves","viernes","s\xe1bado"]},defaultWidth:"wide"}),dayPeriod:(0,o.Z)({values:{narrow:{am:"a",pm:"p",midnight:"mn",noon:"md",morning:"ma\xf1ana",afternoon:"tarde",evening:"tarde",night:"noche"},abbreviated:{am:"AM",pm:"PM",midnight:"medianoche",noon:"mediodia",morning:"ma\xf1ana",afternoon:"tarde",evening:"tarde",night:"noche"},wide:{am:"a.m.",pm:"p.m.",midnight:"medianoche",noon:"mediodia",morning:"ma\xf1ana",afternoon:"tarde",evening:"tarde",night:"noche"}},defaultWidth:"wide",formattingValues:{narrow:{am:"a",pm:"p",midnight:"mn",noon:"md",morning:"de la ma\xf1ana",afternoon:"de la tarde",evening:"de la tarde",night:"de la noche"},abbreviated:{am:"AM",pm:"PM",midnight:"medianoche",noon:"mediodia",morning:"de la ma\xf1ana",afternoon:"de la tarde",evening:"de la tarde",night:"de la noche"},wide:{am:"a.m.",pm:"p.m.",midnight:"medianoche",noon:"mediodia",morning:"de la ma\xf1ana",afternoon:"de la tarde",evening:"de la tarde",night:"de la noche"}},defaultFormattingWidth:"wide"})},c=t(4019),m=t(5849),u={code:"es",formatDistance:function(e,a,t){var i,n=r[e];return(i="string"==typeof n?n:1===a?n.one:n.other.replace("{{count}}",a.toString()),null!=t&&t.addSuffix)?t.comparison&&t.comparison>0?"en "+i:"hace "+i:i},formatLong:n,formatRelative:function(e,a,t,r){return 1!==a.getUTCHours()?l[e]:s[e]},localize:d,match:{ordinalNumber:(0,c.Z)({matchPattern:/^(\d+)(º)?/i,parsePattern:/\d+/i,valueCallback:function(e){return parseInt(e,10)}}),era:(0,m.Z)({matchPatterns:{narrow:/^(ac|dc|a|d)/i,abbreviated:/^(a\.?\s?c\.?|a\.?\s?e\.?\s?c\.?|d\.?\s?c\.?|e\.?\s?c\.?)/i,wide:/^(antes de cristo|antes de la era com[uú]n|despu[eé]s de cristo|era com[uú]n)/i},defaultMatchWidth:"wide",parsePatterns:{any:[/^ac/i,/^dc/i],wide:[/^(antes de cristo|antes de la era com[uú]n)/i,/^(despu[eé]s de cristo|era com[uú]n)/i]},defaultParseWidth:"any"}),quarter:(0,m.Z)({matchPatterns:{narrow:/^[1234]/i,abbreviated:/^T[1234]/i,wide:/^[1234](º)? trimestre/i},defaultMatchWidth:"wide",parsePatterns:{any:[/1/i,/2/i,/3/i,/4/i]},defaultParseWidth:"any",valueCallback:function(e){return e+1}}),month:(0,m.Z)({matchPatterns:{narrow:/^[efmajsond]/i,abbreviated:/^(ene|feb|mar|abr|may|jun|jul|ago|sep|oct|nov|dic)/i,wide:/^(enero|febrero|marzo|abril|mayo|junio|julio|agosto|septiembre|octubre|noviembre|diciembre)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^e/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^en/i,/^feb/i,/^mar/i,/^abr/i,/^may/i,/^jun/i,/^jul/i,/^ago/i,/^sep/i,/^oct/i,/^nov/i,/^dic/i]},defaultParseWidth:"any"}),day:(0,m.Z)({matchPatterns:{narrow:/^[dlmjvs]/i,short:/^(do|lu|ma|mi|ju|vi|s[áa])/i,abbreviated:/^(dom|lun|mar|mi[ée]|jue|vie|s[áa]b)/i,wide:/^(domingo|lunes|martes|mi[ée]rcoles|jueves|viernes|s[áa]bado)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^d/i,/^l/i,/^m/i,/^m/i,/^j/i,/^v/i,/^s/i],any:[/^do/i,/^lu/i,/^ma/i,/^mi/i,/^ju/i,/^vi/i,/^sa/i]},defaultParseWidth:"any"}),dayPeriod:(0,m.Z)({matchPatterns:{narrow:/^(a|p|mn|md|(de la|a las) (mañana|tarde|noche))/i,any:/^([ap]\.?\s?m\.?|medianoche|mediodia|(de la|a las) (mañana|tarde|noche))/i},defaultMatchWidth:"any",parsePatterns:{any:{am:/^a/i,pm:/^p/i,midnight:/^mn/i,noon:/^md/i,morning:/mañana/i,afternoon:/tarde/i,evening:/tarde/i,night:/noche/i}},defaultParseWidth:"any"})},options:{weekStartsOn:1,firstWeekContainsDate:1}}},2208:function(e,a,t){"use strict";t.d(a,{Z:function(){return r}});let r=(0,t(9763).Z)("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])}},function(e){e.O(0,[604,310,554,605,541,992,943,347,367,575,971,117,744],function(){return e(e.s=3038)}),_N_E=e.O()}]);