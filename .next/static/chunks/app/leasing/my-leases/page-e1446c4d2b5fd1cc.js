(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[394],{655:function(e,t,a){Promise.resolve().then(a.bind(a,396))},4935:function(e,t,a){"use strict";a.d(t,{p:function(){return n}});var s=a(7437),r=a(5863);function n(){return(0,s.jsxs)("div",{className:"h-screen flex flex-col items-center justify-center",children:[(0,s.jsx)(r.Z,{className:"h-8 w-8 animate-spin text-blue-500"}),(0,s.jsx)("p",{className:"mt-2 text-sm text-gray-500",children:"Loading..."})]})}},2443:function(e,t,a){"use strict";a.d(t,{p:function(){return c}});var s=a(7437),r=a(605),n=a(9376),i=a(4935);function c(e){let{children:t,allowedRoles:a}=e,{data:c,status:d}=(0,r.useSession)();return"loading"===d?(0,s.jsx)(i.p,{}):((null==c?void 0:c.user)&&a.includes(c.user.role)||(0,n.redirect)("/leasing"),(0,s.jsx)(s.Fragment,{children:t}))}},2595:function(e,t,a){"use strict";a.d(t,{z:function(){return i}});var s=a(7437),r=a(2265),n=a(4508);let i=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("button",{className:(0,n.cn)("inline-flex items-center justify-center rounded-md text-sm font-medium bg-primary text-primary-foreground hover:bg-primary/90 h-10 px-4 py-2",a),ref:t,...r})});i.displayName="Button"},4029:function(e,t,a){"use strict";a.d(t,{Ol:function(){return c},Zb:function(){return i},aY:function(){return l},ll:function(){return d}});var s=a(7437),r=a(2265),n=a(4508);let i=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,className:(0,n.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",a),...r})});i.displayName="Card";let c=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",a),...r})});c.displayName="CardHeader";let d=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("h3",{ref:t,className:(0,n.cn)("text-2xl font-semibold leading-none tracking-tight",a),...r})});d.displayName="CardTitle";let l=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,className:(0,n.cn)("p-6 pt-0",a),...r})});l.displayName="CardContent"},396:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return g}});var s=a(7437),r=a(2265),n=a(4029),i=a(3541),c=a(9048),d=a(9397);let l=(0,a(9763).Z)("Store",[["path",{d:"m2 7 4.41-4.41A2 2 0 0 1 7.83 2h8.34a2 2 0 0 1 1.42.59L22 7",key:"ztvudi"}],["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}],["path",{d:"M15 22v-4a2 2 0 0 0-2-2h-2a2 2 0 0 0-2 2v4",key:"2ebpfo"}],["path",{d:"M2 7h20",key:"1fcdvo"}],["path",{d:"M22 7v3a2 2 0 0 1-2 2v0a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 16 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 12 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 8 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 4 12v0a2 2 0 0 1-2-2V7",key:"jon5kx"}]]);var o=a(1047),u=a(5252),m=a(4935),x=a(2443),f=a(605),h=a(7648),y=a(2595);let p=e=>{switch(e){case 1:return"Recibido";case 2:return"Asignado";case 3:return"Encendido";case 4:return"Evidencia Enviada";case 5:return"Reporte Enviado";case 6:return"Facturado";case 7:return"Completado";default:return"Estado Desconocido"}};function g(){let[e,t]=(0,r.useState)([]),[a,g]=(0,r.useState)(!0),{data:j}=(0,f.useSession)();return((0,r.useEffect)(()=>{(async()=>{try{let e=await fetch("/api/leases/my-leases"),a=await e.json();console.log("Leases data:",a.map(e=>({id:e.id,statusId:e.statusId,statusName:p(e.statusId)}))),t(a)}catch(e){console.error("Error al cargar arriendos:",e)}finally{g(!1)}})()},[]),a)?(0,s.jsx)(m.p,{}):(0,s.jsx)(x.p,{allowedRoles:["ADVERTISER"],children:(0,s.jsxs)("div",{className:"p-6 space-y-6",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Mis Solicitudes"}),(0,s.jsx)(h.default,{href:"/leasing",children:(0,s.jsxs)(y.z,{className:"flex items-center gap-2 bg-blue-600 hover:bg-blue-700 text-white",children:[(0,s.jsx)(d.Z,{className:"h-4 w-4"}),"Nueva Solicitud"]})})]}),(0,s.jsxs)("div",{className:"grid gap-4",children:[e.map(e=>(0,s.jsx)(n.Zb,{className:"bg-white hover:shadow-md transition-shadow duration-200",children:(0,s.jsx)(n.aY,{className:"p-6",children:(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 text-gray-600",children:[(0,s.jsx)(l,{className:"h-4 w-4"}),(0,s.jsx)("span",{className:"text-sm font-medium",children:"Ubicaci\xf3n"})]}),(0,s.jsxs)("p",{className:"font-medium text-gray-900",children:[e.mediaSpace.mediaItem.type,(0,s.jsxs)("span",{className:"block text-sm text-gray-500",children:[e.mediaSpace.store.name," - ",e.mediaSpace.store.location]}),(0,s.jsxs)("span",{className:"block text-sm text-gray-500",children:["Formato: ",e.mediaSpace.mediaItem.format]})]})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 text-gray-600",children:[(0,s.jsx)(o.Z,{className:"h-4 w-4"}),(0,s.jsx)("span",{className:"text-sm font-medium",children:"Duraci\xf3n"})]}),(0,s.jsxs)("p",{className:"font-medium text-gray-900",children:[(0,i.Z)(new Date(e.startDate),"d MMM yyyy",{locale:c.Z}),(0,s.jsxs)("span",{className:"block text-sm text-gray-500",children:["hasta ",(0,i.Z)(new Date(e.endDate),"d MMM yyyy",{locale:c.Z})]})]})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 text-gray-600",children:[(0,s.jsx)(u.Z,{className:"h-4 w-4"}),(0,s.jsx)("span",{className:"text-sm font-medium",children:"Estado"})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("p",{className:"font-medium text-gray-900",children:["$",e.amount.toLocaleString()]}),(0,s.jsx)("span",{className:"px-3 py-1 rounded-full text-sm font-medium ".concat("Recibido"===p(e.statusId)?"bg-red-100 text-red-800":"Asignado"===p(e.statusId)?"bg-orange-100 text-orange-800":"Encendido"===p(e.statusId)?"bg-amber-100 text-amber-800":"Evidencia Enviada"===p(e.statusId)?"bg-yellow-100 text-yellow-800":"Reporte Enviado"===p(e.statusId)?"bg-lime-100 text-lime-800":"Facturado"===p(e.statusId)?"bg-emerald-100 text-emerald-800":"Completado"===p(e.statusId)?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"),children:p(e.statusId)})]})]})]})})},e.id)),0===e.length&&(0,s.jsx)("div",{className:"text-center py-12 bg-white rounded-lg border border-gray-200",children:(0,s.jsx)("p",{className:"text-gray-500",children:"No tienes solicitudes activas"})})]})]})})}},4508:function(e,t,a){"use strict";a.d(t,{cn:function(){return n}});var s=a(1994),r=a(3335);function n(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,r.m6)((0,s.W)(t))}},1047:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});let s=(0,a(9763).Z)("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]])},5252:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});let s=(0,a(9763).Z)("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]])},5863:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});let s=(0,a(9763).Z)("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},9397:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});let s=(0,a(9763).Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])}},function(e){e.O(0,[554,605,541,457,971,117,744],function(){return e(e.s=655)}),_N_E=e.O()}]);