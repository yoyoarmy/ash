exports.id=3560,exports.ids=[3560],exports.modules={74527:(e,a,t)=>{Promise.resolve().then(t.bind(t,33850)),Promise.resolve().then(t.bind(t,82284)),Promise.resolve().then(t.bind(t,67072)),Promise.resolve().then(t.bind(t,26245))},14151:(e,a,t)=>{Promise.resolve().then(t.t.bind(t,12994,23)),Promise.resolve().then(t.t.bind(t,96114,23)),Promise.resolve().then(t.t.bind(t,9727,23)),Promise.resolve().then(t.t.bind(t,79671,23)),Promise.resolve().then(t.t.bind(t,41868,23)),Promise.resolve().then(t.t.bind(t,84759,23))},33850:(e,a,t)=>{"use strict";t.d(a,{default:()=>v});var s=t(10326),r=t(57671),i=t(6507),l=t(79635),n=t(71810),o=t(94019),d=t(71939),c=t(14689),m=t(17577),x=t(77109),u=t(90434),h=t(35047),p=t(26245),f=t(41726),g=t(82610);function v(){let[e,a]=(0,m.useState)(!1),[t,v]=(0,m.useState)(!1),{notifications:b,unreadCount:j,markAsRead:y,clearNotification:N}=(0,d.z)(),{data:w}=(0,x.useSession)(),C=(0,h.usePathname)(),{itemCount:S,items:A,removeItem:P,clearCart:M,formData:I}=(0,p.j)(),[D,k]=(0,m.useState)(!1),E=(0,h.useRouter)(),[Z,T]=(0,m.useState)(!1),O=A.reduce((e,a)=>e+a.amount,0),F=async()=>{if(0!==A.length&&w?.user){if(!I){alert("Por favor complete el formulario de informaci\xf3n adicional primero.");return}if(!I.customerName.trim()){alert("Por favor ingrese el nombre del cliente.");return}T(!0);try{let e=await fetch("/api/orders",{method:"POST",headers:{"Content-Type":"application/json"}});if(!e.ok)throw Error("Failed to create order");let a=await e.json();for(let e of(console.log("Order created:",a),await new Promise(e=>setTimeout(e,1e3)),A))await fetch("/api/leases",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({mediaSpaceId:e.spaceId,customerName:I.customerName,startDate:e.startDate,endDate:e.endDate,amount:e.amount,statusId:1,orderId:a.id,extraInformation:{providerInfo:I.providerInfo,productDetails:I.productDetails,campaignRedirect:I.campaignRedirect,marketingGoals:I.marketingGoals,disclaimer:I.disclaimer,productUrl:I.productUrl,targetAudience:I.targetAudience,brandGraphics:I.brandGraphics||"",providerContact:I.providerContact,billingType:I.billingType,giftCampaignDetails:I.giftCampaignDetails||"",planAlaMedida:I.planAlaMedida||"",planAlaMedidaAmount:I.planAlaMedidaAmount||""}})});M(),k(!1),w?.user?.role==="ADVERTISER"?E.push("/leasing/my-leases"):E.push("/leasing/history")}catch(e){console.error("Error creating order:",e),alert("Error al crear la solicitud. Por favor intente nuevamente.")}finally{T(!1)}}};return(0,s.jsxs)("header",{className:"bg-white shadow-sm",children:[s.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,s.jsxs)("div",{className:"flex justify-between h-16",children:[s.jsx("div",{className:"flex",children:s.jsx("div",{className:"flex-shrink-0 flex items-center",children:s.jsx("h1",{className:"text-xl font-bold",children:"Gestor de Medios Publicitarios"})})}),(0,s.jsxs)("div",{className:"flex items-center gap-4",children:["/leasing"===C&&(0,s.jsxs)("button",{className:"p-2 text-gray-600 hover:text-gray-900 relative",onClick:()=>k(!0),children:[s.jsx(r.Z,{className:"h-6 w-6"}),S>0&&s.jsx("span",{className:"absolute -top-1 -right-1 bg-blue-500 text-white rounded-full w-5 h-5 text-xs flex items-center justify-center",children:S})]}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsxs)("button",{onClick:()=>{a(!e),e||b.forEach(e=>{e.read||y(e.id)})},className:"p-2 hover:bg-gray-100 rounded-full relative",children:[s.jsx(i.Z,{className:"h-6 w-6"}),j>0&&s.jsx("span",{className:"absolute top-0 right-0 bg-red-500 text-white rounded-full w-5 h-5 text-xs flex items-center justify-center",children:j})]}),e&&s.jsx("div",{className:"absolute right-0 mt-2 w-80 bg-white rounded-lg shadow-lg border border-gray-200 max-h-96 overflow-y-auto",children:(0,s.jsxs)("div",{className:"p-4",children:[s.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Notificaciones"}),0===b.length?s.jsx("p",{className:"text-gray-500",children:"No hay notificaciones"}):s.jsx("div",{className:"space-y-2",children:b.map(e=>(0,s.jsxs)("div",{className:`p-3 rounded-lg ${e.read?"bg-gray-50":"bg-blue-50"}`,children:[s.jsx("p",{className:"text-sm",children:e.message}),(0,s.jsxs)("div",{className:"flex justify-between items-center mt-2",children:[s.jsx("span",{className:"text-xs text-gray-500",children:(0,c.Z)(e.timestamp,"MMM d, h:mm a")}),s.jsx("button",{onClick:()=>N(e.id),className:"text-xs text-gray-400 hover:text-gray-600",children:"Eliminar"})]})]},e.id))})]})})]}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsxs)("button",{onClick:()=>v(!t),className:"p-2 hover:bg-gray-100 rounded-full flex items-center gap-2",children:[s.jsx(l.Z,{className:"h-6 w-6"}),w?.user?.name&&s.jsx("span",{className:"text-sm font-medium",children:w.user.name})]}),t&&s.jsx("div",{className:"absolute right-0 mt-2 w-48 bg-white rounded-lg shadow-lg border border-gray-200",children:s.jsx("div",{className:"p-2",children:w?.user?.role==="ADMIN"?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"px-4 py-2 text-sm text-gray-500",children:["Conectado como",s.jsx("br",{}),s.jsx("span",{className:"font-medium text-gray-900",children:w.user.email})]}),s.jsx("div",{className:"border-t border-gray-100 my-1"}),s.jsx(u.default,{href:"/register",className:"block px-4 py-2 text-sm text-blue-600 hover:bg-blue-50 rounded-md",children:"Crear Usuario"}),(0,s.jsxs)("button",{onClick:()=>(0,x.signOut)(),className:"w-full text-left px-4 py-2 text-sm text-red-600 hover:bg-red-50 rounded-md flex items-center gap-2",children:[s.jsx(n.Z,{className:"h-4 w-4"}),"Cerrar Sesi\xf3n"]})]}):w?.user?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"px-4 py-2 text-sm text-gray-500",children:["Conectado como",s.jsx("br",{}),s.jsx("span",{className:"font-medium text-gray-900",children:w.user.email})]}),s.jsx("div",{className:"border-t border-gray-100 my-1"}),(0,s.jsxs)("button",{onClick:()=>(0,x.signOut)(),className:"w-full text-left px-4 py-2 text-sm text-red-600 hover:bg-red-50 rounded-md flex items-center gap-2",children:[s.jsx(n.Z,{className:"h-4 w-4"}),"Cerrar Sesi\xf3n"]})]}):s.jsx(u.default,{href:"/login",className:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 rounded-md",children:"Sign in"})})})]})]})]})}),D&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:(0,s.jsxs)("div",{className:"bg-white rounded-lg p-6 max-w-[800px] w-full shadow-xl",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[s.jsx("h3",{className:"text-lg font-medium",children:"Carrito de Solicitudes"}),s.jsx("button",{onClick:()=>k(!1),className:"text-gray-500 hover:text-gray-700",children:s.jsx(o.Z,{className:"h-5 w-5"})})]}),A.length>0?(0,s.jsxs)(s.Fragment,{children:[s.jsx("div",{className:"space-y-4 mb-6",children:A.map((e,a)=>(0,s.jsxs)("div",{className:"flex justify-between items-center p-4 border rounded-lg",children:[(0,s.jsxs)("div",{children:[s.jsx("h4",{className:"font-medium",children:e.mediaType}),s.jsx("p",{className:"text-sm text-gray-600",children:e.storeName}),(0,s.jsxs)("p",{className:"text-sm text-gray-600",children:[(0,c.Z)(e.startDate,"d MMM",{locale:f.Z})," - ",(0,c.Z)(e.endDate,"d MMM yyyy",{locale:f.Z})]}),(0,s.jsxs)("p",{className:"text-sm font-medium",children:["$",e.amount.toLocaleString()]})]}),s.jsx("button",{onClick:()=>P(e.spaceId),className:"text-red-500 hover:text-red-700",children:s.jsx(o.Z,{className:"h-5 w-5"})})]},a))}),(0,s.jsxs)("div",{className:"border-t pt-4",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[s.jsx("span",{className:"font-medium",children:"Total:"}),(0,s.jsxs)("span",{className:"font-medium",children:["$",O.toLocaleString()]})]}),s.jsx(g.z,{className:"w-full bg-blue-600 hover:bg-blue-700 text-white",onClick:F,disabled:Z,children:Z?"Procesando...":"Confirmar Solicitud"})]})]}):s.jsx("div",{className:"text-center py-6 text-gray-500",children:"No hay items en el carrito"})]})})]})}},82284:(e,a,t)=>{"use strict";t.d(a,{Navigation:()=>x});var s=t(10326),r=t(90434),i=t(35047),l=t(48238),n=t(70717),o=t(24319),d=t(88378),c=t(10029),m=t(77109);function x(){let e=(0,i.usePathname)(),{data:a}=(0,m.useSession)(),t=a?.user?"ADVERTISER"===a.user.role?[{href:"/leasing",label:"Solicitud",icon:l.Z},{href:"/leasing/my-leases",label:"Mis Solicitudes",icon:n.Z}]:[{href:"/dashboard",label:"Panel Principal",icon:o.Z,roles:["ADMIN","ASSOCIATE"]},{href:"/leasing",label:"Solicitud",icon:l.Z,roles:["ADMIN","ASSOCIATE"]},{href:"/manage",label:"Administrar",icon:d.Z,roles:["ADMIN","ASSOCIATE"]},{href:"/leasing/history",label:"Historial",icon:n.Z,roles:["ADMIN","ASSOCIATE"]},{name:"Pipeline",href:"/pipedrive",label:"Pipeline",icon:c.Z,roles:["ADMIN","ASSOCIATE"]}].filter(e=>e.roles.includes(a.user.role)):[];return s.jsx("nav",{className:"flex flex-col gap-4 p-4",children:t.map(({href:a,label:t,icon:i})=>{let l=e===a;return(0,s.jsxs)(r.default,{href:a,className:`
              flex items-center gap-2 px-4 py-2 rounded-lg
              transition-colors duration-200
              ${l?"bg-blue-100 text-blue-700":"text-gray-600 hover:bg-gray-100"}
            `,children:[s.jsx(i,{className:"h-5 w-5"}),s.jsx("span",{children:t})]},a)})})}},67072:(e,a,t)=>{"use strict";t.d(a,{Providers:()=>d});var s=t(10326),r=t(77109),i=t(17577);let l=(0,i.createContext)(void 0),n=({children:e})=>{let[a,t]=(0,i.useState)([]),[r,n]=(0,i.useState)(!0),[o,d]=(0,i.useState)(null);return(0,i.useEffect)(()=>{(async()=>{try{let e=await fetch("/api/media"),a=await e.json();t(a),n(!1)}catch(e){d("Failed to fetch media data"),n(!1)}})()},[]),s.jsx(l.Provider,{value:{media:a,setMedia:t,loading:r,error:o},children:e})};var o=t(71939);function d({children:e}){return s.jsx(r.SessionProvider,{children:s.jsx(n,{children:s.jsx(o.J,{children:e})})})}},82610:(e,a,t)=>{"use strict";t.d(a,{z:()=>l});var s=t(10326),r=t(17577),i=t(77863);let l=r.forwardRef(({className:e,...a},t)=>s.jsx("button",{className:(0,i.cn)("inline-flex items-center justify-center rounded-md text-sm font-medium bg-primary text-primary-foreground hover:bg-primary/90 h-10 px-4 py-2",e),ref:t,...a}));l.displayName="Button"},26245:(e,a,t)=>{"use strict";t.d(a,{CartProvider:()=>l,j:()=>n});var s=t(10326),r=t(17577);let i=(0,r.createContext)({items:[],itemCount:0,addItem:()=>{},removeItem:()=>{},clearCart:()=>{},formData:null,setFormData:()=>{}});function l({children:e}){let[a,t]=(0,r.useState)([]),[l,n]=(0,r.useState)(null);return s.jsx(i.Provider,{value:{items:a,formData:l,addItem:e=>{console.log("Adding item to cart with planAlaMedida:",{planAlaMedida:e.extraInformation.planAlaMedida,planAlaMedidaAmount:e.extraInformation.planAlaMedidaAmount});let a={...e,extraInformation:{...e.extraInformation,planAlaMedida:e.extraInformation.planAlaMedida??null,planAlaMedidaAmount:e.extraInformation.planAlaMedidaAmount??null}};console.log("Processed cart item:",a),t(e=>[...e,a])},removeItem:e=>{t(a=>a.filter(a=>a.spaceId!==e))},clearCart:()=>{t([])},setFormData:n,itemCount:a.length},children:e})}function n(){let e=(0,r.useContext)(i);if(void 0===e)throw Error("useCart must be used within a CartProvider");return e}},71939:(e,a,t)=>{"use strict";t.d(a,{J:()=>n,z:()=>o});var s=t(10326),r=t(17577);let i=(0,r.createContext)(void 0),l={"Lease successfully created":"Solicitud creada exitosamente","Failed to create lease":"Error al crear la solicitud","Lease successfully revoked":"Solicitud revocada exitosamente","Failed to revoke lease":"Error al revocar la solicitud","Store updated successfully":"Tienda actualizada exitosamente","Failed to update store":"Error al actualizar la tienda","Media space updated":"Espacio publicitario actualizado","Failed to update media space":"Error al actualizar el espacio publicitario"};function n({children:e}){let[a,t]=(0,r.useState)([]),n=a.filter(e=>!e.read).length;return s.jsx(i.Provider,{value:{notifications:a,addNotification:e=>{let a=l[e]||e,s={id:Date.now().toString(),message:a,timestamp:new Date,read:!1};t(e=>[s,...e])},markAsRead:e=>{t(a=>a.map(a=>a.id===e?{...a,read:!0}:a))},clearNotification:e=>{t(a=>a.filter(a=>a.id!==e))},unreadCount:n},children:e})}let o=()=>{let e=(0,r.useContext)(i);if(void 0===e)throw Error("useNotifications must be used within a NotificationProvider");return e}},77863:(e,a,t)=>{"use strict";t.d(a,{cn:()=>i});var s=t(41135),r=t(31009);function i(...e){return(0,r.m6)((0,s.W)(e))}},76825:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>x,metadata:()=>m});var s=t(19510),r=t(85384),i=t.n(r);t(67272);var l=t(68570);let n=(0,l.createProxy)(String.raw`/Users/yoyo/Desktop/adspace 2/app/components/Navigation.tsx#Navigation`),o=(0,l.createProxy)(String.raw`/Users/yoyo/Desktop/adspace 2/app/components/Header.tsx#default`),d=(0,l.createProxy)(String.raw`/Users/yoyo/Desktop/adspace 2/app/components/Providers.tsx#Providers`);(0,l.createProxy)(String.raw`/Users/yoyo/Desktop/adspace 2/app/contexts/CartContext.tsx#CartContext`);let c=(0,l.createProxy)(String.raw`/Users/yoyo/Desktop/adspace 2/app/contexts/CartContext.tsx#CartProvider`);(0,l.createProxy)(String.raw`/Users/yoyo/Desktop/adspace 2/app/contexts/CartContext.tsx#useCart`);let m={title:"Ad Media Manager",description:"Manage advertising media in branches"};function x({children:e}){return s.jsx("html",{lang:"en",children:s.jsx("body",{className:i().className,children:s.jsx(d,{children:s.jsx(c,{children:(0,s.jsxs)("div",{className:"flex h-screen bg-gray-100",children:[s.jsx(n,{}),(0,s.jsxs)("div",{className:"flex-1 flex flex-col overflow-hidden",children:[s.jsx(o,{}),s.jsx("main",{className:"flex-1 overflow-x-hidden overflow-y-auto bg-gray-200 p-6",children:e})]})]})})})})})}},67272:()=>{}};