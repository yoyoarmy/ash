(()=>{var e={};e.id=8607,e.ids=[8607],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},86706:(e,a,s)=>{"use strict";s.r(a),s.d(a,{GlobalError:()=>n.a,__next_app__:()=>m,originalPathname:()=>p,pages:()=>o,routeModule:()=>u,tree:()=>c}),s(78242),s(76825),s(35866);var t=s(23191),r=s(88716),i=s(37922),n=s.n(i),d=s(95231),l={};for(let e in d)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>d[e]);s.d(a,l);let c=["",{children:["redirecciondecampana",{children:["[id]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,78242)),"/Users/yoyo/Desktop/adspace 2/app/redirecciondecampana/[id]/page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,76825)),"/Users/yoyo/Desktop/adspace 2/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,35866,23)),"next/dist/client/components/not-found-error"]}],o=["/Users/yoyo/Desktop/adspace 2/app/redirecciondecampana/[id]/page.tsx"],p="/redirecciondecampana/[id]/page",m={require:s,loadChunk:()=>Promise.resolve()},u=new t.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/redirecciondecampana/[id]/page",pathname:"/redirecciondecampana/[id]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},7912:(e,a,s)=>{Promise.resolve().then(s.bind(s,78330))},66167:(e,a,s)=>{"use strict";s.d(a,{p:()=>i});var t=s(10326),r=s(75290);function i(){return(0,t.jsxs)("div",{className:"h-screen flex flex-col items-center justify-center",children:[t.jsx(r.Z,{className:"h-8 w-8 animate-spin text-blue-500"}),t.jsx("p",{className:"mt-2 text-sm text-gray-500",children:"Loading..."})]})}},6994:(e,a,s)=>{"use strict";s.d(a,{p:()=>d});var t=s(10326),r=s(77109),i=s(35047),n=s(66167);function d({children:e,allowedRoles:a}){let{data:s,status:d}=(0,r.useSession)();return"loading"===d?t.jsx(n.p,{}):(s?.user&&a.includes(s.user.role)||(0,i.redirect)("/leasing"),t.jsx(t.Fragment,{children:e}))}},83431:(e,a,s)=>{"use strict";s.d(a,{Ol:()=>d,Zb:()=>n,aY:()=>c,ll:()=>l});var t=s(10326),r=s(17577),i=s(77863);let n=r.forwardRef(({className:e,...a},s)=>t.jsx("div",{ref:s,className:(0,i.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",e),...a}));n.displayName="Card";let d=r.forwardRef(({className:e,...a},s)=>t.jsx("div",{ref:s,className:(0,i.cn)("flex flex-col space-y-1.5 p-6",e),...a}));d.displayName="CardHeader";let l=r.forwardRef(({className:e,...a},s)=>t.jsx("h3",{ref:s,className:(0,i.cn)("text-2xl font-semibold leading-none tracking-tight",e),...a}));l.displayName="CardTitle";let c=r.forwardRef(({className:e,...a},s)=>t.jsx("div",{ref:s,className:(0,i.cn)("p-6 pt-0",e),...a}));c.displayName="CardContent"},78330:(e,a,s)=>{"use strict";s.r(a),s.d(a,{default:()=>p});var t=s(10326),r=s(17577),i=s(35047),n=s(82610),d=s(83431),l=s(66167),c=s(6994),o=s(77109);function p(){let{data:e}=(0,o.useSession)();(0,i.useRouter)(),(0,i.useParams)();let[a,s]=(0,r.useState)(null),[p,m]=(0,r.useState)(!0),[u,x]=(0,r.useState)(!1),[h,f]=(0,r.useState)(""),g=async()=>{if(a){x(!0);try{if(!(await fetch(`/api/leases/${a.id}/redirect`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({campaignRedirect:h})})).ok)throw Error("Failed to update");await fetch(`/api/leases/${a.id}/notify`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({lease:a,redirectUrl:h})}),s(e=>e?{...e,extraInformation:{...e.extraInformation,campaignRedirect:h}}:null),alert("Redirecci\xf3n de Campa\xf1a actualizada exitosamente")}catch(e){console.error("Error updating lease:",e),alert("Error al actualizar la redirecci\xf3n")}finally{x(!1)}}};return p?t.jsx(l.p,{}):a?t.jsx(c.p,{allowedRoles:["ADMIN","ASSOCIATE"],children:t.jsx("div",{className:"min-h-screen p-6 bg-white",children:t.jsx("div",{className:"max-w-2xl mx-auto bg-white",children:(0,t.jsxs)(d.Zb,{children:[t.jsx(d.Ol,{className:"bg-white",children:t.jsx(d.ll,{children:"Actualizar Redirecci\xf3n de Campa\xf1a"})}),(0,t.jsxs)(d.aY,{className:"space-y-4 bg-white",children:[(0,t.jsxs)("div",{className:"space-y-2 bg-white",children:[t.jsx("h3",{className:"font-medium",children:"Detalles de la Solicitud"}),(0,t.jsxs)("p",{className:"text-sm text-gray-600",children:["Lease #",a.id]}),(0,t.jsxs)("p",{className:"text-sm text-gray-600",children:["Cliente: ",a.customerName]}),(0,t.jsxs)("p",{className:"text-sm text-gray-600",children:["Tienda: ",a.mediaSpace.store.name]}),(0,t.jsxs)("p",{className:"text-sm text-gray-600",children:["Tipo de Medio: ",a.mediaSpace.mediaItem.type]})]}),(0,t.jsxs)("div",{className:"space-y-2 bg-white",children:[t.jsx("label",{className:"text-sm font-medium",children:"Redirecci\xf3n de Campa\xf1a"}),t.jsx("div",{className:"flex flex-col gap-4",children:t.jsx("input",{type:"url",value:h,onChange:e=>f(e.target.value),placeholder:"Ingrese la URL de redirecci\xf3n",className:"w-full px-3 py-2 border rounded-md"})})]}),t.jsx(n.z,{onClick:g,disabled:u,className:"w-full",children:u?"Actualizando...":"Actualizar Redirecci\xf3n"})]})]})})})}):t.jsx("div",{className:"p-6 bg-white",children:"Lease not found"})}},75290:(e,a,s)=>{"use strict";s.d(a,{Z:()=>t});let t=(0,s(76557).Z)("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},78242:(e,a,s)=>{"use strict";s.r(a),s.d(a,{default:()=>t});let t=(0,s(68570).createProxy)(String.raw`/Users/yoyo/Desktop/adspace 2/app/redirecciondecampana/[id]/page.tsx#default`)}};var a=require("../../../webpack-runtime.js");a.C(e);var s=e=>a(a.s=e),t=a.X(0,[8948,8164,3560],()=>s(86706));module.exports=t})();