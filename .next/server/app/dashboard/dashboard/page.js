(()=>{var e={};e.id=1300,e.ids=[1300],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},36636:(e,a,s)=>{"use strict";s.r(a),s.d(a,{GlobalError:()=>d.a,__next_app__:()=>h,originalPathname:()=>m,pages:()=>c,routeModule:()=>u,tree:()=>n}),s(90395),s(76825),s(35866);var t=s(23191),l=s(88716),r=s(37922),d=s.n(r),i=s(95231),o={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>i[e]);s.d(a,o);let n=["",{children:["dashboard",{children:["dashboard",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,90395)),"/Users/yoyo/Desktop/adspace 2/app/dashboard/dashboard/page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,76825)),"/Users/yoyo/Desktop/adspace 2/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,35866,23)),"next/dist/client/components/not-found-error"]}],c=["/Users/yoyo/Desktop/adspace 2/app/dashboard/dashboard/page.tsx"],m="/dashboard/dashboard/page",h={require:s,loadChunk:()=>Promise.resolve()},u=new t.AppPageRouteModule({definition:{kind:l.x.APP_PAGE,page:"/dashboard/dashboard/page",pathname:"/dashboard/dashboard",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:n}})},25384:(e,a,s)=>{Promise.resolve().then(s.bind(s,55556))},53766:(e,a,s)=>{"use strict";s.d(a,{r:()=>h});var t=s(10326),l=s(17577),r=s(37529),d=s(14689),i=s(82610),o=s(37358),n=s(11890),c=s(39183),m=s(41726);function h({onDateRangeChange:e}){let[a,s]=(0,l.useState)(!1),[h,u]=(0,l.useState)({from:new Date,to:new Date(new Date().getFullYear(),11,31)});return(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsxs)(i.z,{onClick:()=>s(!a),variant:"outline",className:"bg-white w-[240px] justify-start text-left font-normal",children:[t.jsx(o.Z,{className:"mr-2 h-4 w-4"}),h?.from?h.to?(0,t.jsxs)(t.Fragment,{children:[(0,d.Z)(h.from,"d MMM",{locale:m.Z})," -"," ",(0,d.Z)(h.to,"d MMM, yyyy",{locale:m.Z})]}):(0,d.Z)(h.from,"d MMM, yyyy",{locale:m.Z}):t.jsx("span",{children:"Seleccionar fechas"})]}),a&&(0,t.jsxs)("div",{className:"absolute top-full mt-2 bg-white rounded-lg shadow-lg p-4 z-50",children:[t.jsx(r._W,{mode:"range",defaultMonth:h?.from,selected:h,onSelect:a=>{u(a),e(a)},numberOfMonths:2,locale:m.Z,formatters:{formatCaption:e=>(0,d.Z)(e,"MMMM yyyy",{locale:m.Z}).replace(/^\w/,e=>e.toUpperCase()),formatWeekdayName:e=>(0,d.Z)(e,"EEEEEE",{locale:m.Z}).toUpperCase()},components:{IconLeft:({...e})=>t.jsx(n.Z,{className:"h-4 w-4",...e}),IconRight:({...e})=>t.jsx(c.Z,{className:"h-4 w-4",...e})},modifiers:{range:h},modifiersStyles:{range_start:{color:"white",backgroundColor:"#3b82f6"},range_end:{color:"white",backgroundColor:"#3b82f6"},range_middle:{color:"#1e3a8a",backgroundColor:"#eff6ff"}}}),(0,t.jsxs)("div",{className:"mt-4 flex justify-end gap-2",children:[t.jsx(i.z,{className:"bg-white hover:bg-gray-50 border border-gray-200",onClick:()=>{let a={from:new Date,to:new Date(new Date().getFullYear(),11,31)};u(a),e(a)},children:"Reiniciar"}),t.jsx(i.z,{className:"bg-blue-600 hover:bg-blue-700 text-white",onClick:()=>s(!1),children:"Cerrar"})]})]})]})}s(8228)},66167:(e,a,s)=>{"use strict";s.d(a,{p:()=>r});var t=s(10326),l=s(75290);function r(){return(0,t.jsxs)("div",{className:"h-screen flex flex-col items-center justify-center",children:[t.jsx(l.Z,{className:"h-8 w-8 animate-spin text-blue-500"}),t.jsx("p",{className:"mt-2 text-sm text-gray-500",children:"Loading..."})]})}},88656:(e,a,s)=>{"use strict";s.d(a,{Z:()=>l});var t=s(10326);function l({totalAdItems:e,availableSpaces:a,occupiedSpaces:s}){return(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,t.jsxs)("div",{className:"bg-white p-4 rounded-lg shadow",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Total Espacios"}),t.jsx("p",{className:"text-3xl font-bold text-blue-600",children:e})]}),(0,t.jsxs)("div",{className:"bg-white p-4 rounded-lg shadow",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Disponibles"}),t.jsx("p",{className:"text-3xl font-bold text-green-600",children:a})]}),(0,t.jsxs)("div",{className:"bg-white p-4 rounded-lg shadow",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Ocupados"}),t.jsx("p",{className:"text-3xl font-bold text-amber-600",children:s})]}),(0,t.jsxs)("div",{className:"bg-white p-4 rounded-lg shadow",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Utilizaci\xf3n"}),(0,t.jsxs)("p",{className:"text-3xl font-bold text-purple-600",children:[e?Math.round(s/e*100):0,"%"]})]})]})}},6994:(e,a,s)=>{"use strict";s.d(a,{p:()=>i});var t=s(10326),l=s(77109),r=s(35047),d=s(66167);function i({children:e,allowedRoles:a}){let{data:s,status:i}=(0,l.useSession)();return"loading"===i?t.jsx(d.p,{}):(s?.user&&a.includes(s.user.role)||(0,r.redirect)("/leasing"),t.jsx(t.Fragment,{children:e}))}},64070:(e,a,s)=>{"use strict";s.d(a,{I:()=>d});var t=s(10326),l=s(17577),r=s(77863);let d=l.forwardRef(({className:e,type:a,...s},l)=>t.jsx("input",{type:a,className:(0,r.cn)("flex h-10 w-full rounded-md border bg-background px-3 py-2 text-sm",e),ref:l,...s}));d.displayName="Input"},98268:(e,a,s)=>{"use strict";s.d(a,{Bw:()=>h,Ph:()=>n,Ql:()=>u,i4:()=>c,ki:()=>m});var t=s(10326),l=s(17577),r=s(26909),d=s(941),i=s(32933),o=s(77863);let n=r.fC,c=l.forwardRef(({className:e,children:a,...s},l)=>(0,t.jsxs)(r.xz,{ref:l,className:(0,o.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),...s,children:[a,t.jsx(d.Z,{className:"h-4 w-4 opacity-50"})]}));c.displayName=r.xz.displayName;let m=r.B4,h=l.forwardRef(({className:e,children:a,position:s="popper",...l},d)=>t.jsx(r.h_,{children:t.jsx(r.VY,{ref:d,className:(0,o.cn)("relative z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===s&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:s,...l,children:t.jsx(r.l_,{className:(0,o.cn)("p-1","popper"===s&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:a})})}));h.displayName=r.VY.displayName;let u=l.forwardRef(({className:e,children:a,...s},l)=>(0,t.jsxs)(r.ck,{ref:l,className:(0,o.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...s,children:[t.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:t.jsx(r.wU,{children:t.jsx(i.Z,{className:"h-4 w-4"})})}),t.jsx(r.eT,{children:a})]}));u.displayName=r.ck.displayName},55556:(e,a,s)=>{"use strict";s.r(a),s.d(a,{default:()=>x});var t=s(10326),l=s(17577),r=s(35047),d=s(90434),i=s(88656),o=s(82610),n=s(98268),c=s(64070),m=s(53766),h=s(66167),u=s(6994),p=s(71939);function x(){let e=(0,r.useSearchParams)().get("mediaTypeId"),[a,s]=(0,l.useState)([]),[x,g]=(0,l.useState)("None"),[f,b]=(0,l.useState)(!0),[j,w]=(0,l.useState)([]),[y,v]=(0,l.useState)("all"),[N,S]=(0,l.useState)(""),[k,C]=(0,l.useState)({from:new Date,to:new Date(new Date().getFullYear(),11,31)}),[D,I]=(0,l.useState)(e||"all"),[M,Z]=(0,l.useState)([]),{addNotification:P}=(0,p.z)(),_=e=>{g(e);let t=[...a];switch(e){case"Product":t.sort((e,a)=>{let s=e.mediaSpaces.length;return a.mediaSpaces.length-s});break;case"Available":t.sort((e,a)=>{let s=e.mediaSpaces.filter(e=>"available"===e.status).length;return a.mediaSpaces.filter(e=>"available"===e.status).length-s});break;case"In Use":t.sort((e,a)=>{let s=e.mediaSpaces.filter(e=>e.leases?.some(e=>"Completado"!==e.status&&new Date(e.endDate)>=new Date)).length;return a.mediaSpaces.filter(e=>e.leases?.some(e=>"Completado"!==e.status&&new Date(e.endDate)>=new Date)).length-s})}s(t)},U=Array.isArray(a)?a.filter(e=>{let a=e.name.toLowerCase().includes(N.toLowerCase())||e.location.toLowerCase().includes(N.toLowerCase()),s="all"===y||"1"===y&&(2===e.brandId||3===e.brandId)||e.brandId.toString()===y,t="all"===D||e.mediaSpaces.some(e=>e.mediaItem.mediaItemType&&e.mediaItem.mediaItemType.id===parseInt(D));return a&&s&&t}):[],T=(0,l.useMemo)(()=>U.map(e=>{let a="all"===D?e.mediaSpaces:e.mediaSpaces.filter(e=>e.mediaItem&&e.mediaItem.mediaItemType.id===parseInt(D)),s={total:a.length,inUse:a.filter(e=>e.leases?.some(e=>{if(!k?.from||!k?.to)return"Completado"!==e.status;let a=new Date(e.startDate),s=new Date(e.endDate);return"Completado"!==e.status&&a<=k.to&&s>=k.from})).length,available:0};return s.available=s.total-s.inUse,{...e,stats:s,filteredSpaces:a}}),[U,D,k]),A=(0,l.useMemo)(()=>{let e=T.reduce((e,a)=>({total:e.total+a.stats.total,inUse:e.inUse+a.stats.inUse,available:e.available+a.stats.available}),{total:0,inUse:0,available:0});return{totalAdItems:e.total,availableSpaces:e.available,occupiedSpaces:e.inUse}},[T]);return((0,l.useMemo)(()=>{if(!a)return[];let e=[...a];switch(x){case"product":return e.sort((e,a)=>e.name.localeCompare(a.name));case"available":return e.sort((e,a)=>{let s=e.mediaSpaces.filter(e=>"available"===e.status).length;return a.mediaSpaces.filter(e=>"available"===e.status).length-s});case"inUse":return e.sort((e,a)=>{let s=e.mediaSpaces.filter(e=>e.leases?.some(e=>"Completado"!==e.status)).length;return a.mediaSpaces.filter(e=>e.leases?.some(e=>"Completado"!==e.status)).length-s});default:return e}},[a,x]),f)?t.jsx(h.p,{}):t.jsx(u.p,{allowedRoles:["ADMIN","ASSOCIATE"],children:(0,t.jsxs)("div",{className:"space-y-6",children:[t.jsx(i.Z,{totalAdItems:A.totalAdItems,availableSpaces:A.availableSpaces,occupiedSpaces:A.occupiedSpaces}),(0,t.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[t.jsx("h1",{className:"text-2xl font-bold",children:"Tiendas"}),(0,t.jsxs)("div",{className:"flex gap-3 bg-white p-2 rounded-lg shadow-md",children:[t.jsx(o.z,{onClick:()=>_("Product"),className:`px-4 py-2 rounded-md transition-all ${"Product"===x?"bg-blue-500 text-white shadow-sm":"bg-white text-gray-700 hover:bg-gray-50"}`,children:"Ordenar por Producto"}),t.jsx(o.z,{onClick:()=>_("Available"),className:`px-4 py-2 rounded-md transition-all ${"Available"===x?"bg-blue-500 text-white shadow-sm":"bg-white text-gray-700 hover:bg-gray-50"}`,children:"Ordenar por Disponibilidad"}),t.jsx(o.z,{onClick:()=>_("In Use"),className:`px-4 py-2 rounded-md transition-all ${"In Use"===x?"bg-blue-500 text-white shadow-sm":"bg-white text-gray-700 hover:bg-gray-50"}`,children:"Ordenar por Solicitudes"})]})]}),(0,t.jsxs)("div",{className:"flex gap-4 mb-6 items-center",children:[t.jsx("div",{className:"flex-none",children:t.jsx(m.r,{onDateRangeChange:C})}),t.jsx("div",{className:"flex-1",children:t.jsx(c.I,{placeholder:"Buscar tiendas...",value:N,onChange:e=>S(e.target.value),className:"w-full"})}),(0,t.jsxs)("div",{className:"flex gap-2 flex-none",children:[(0,t.jsxs)(n.Ph,{value:D,onValueChange:I,children:[t.jsx(n.i4,{className:"w-[200px] bg-white",children:t.jsx(n.ki,{placeholder:"Todos los Tipos de Medios"})}),(0,t.jsxs)(n.Bw,{className:"max-h-[300px] overflow-y-auto bg-white",children:[t.jsx(n.Ql,{value:"all",children:"Todos los Tipos"}),M.map(e=>t.jsx(n.Ql,{value:e.id.toString(),className:"hover:bg-gray-50",children:e.name},e.id))]})]}),(0,t.jsxs)(n.Ph,{value:y,onValueChange:v,children:[t.jsx(n.i4,{className:"w-[180px] bg-white",children:t.jsx(n.ki,{placeholder:"Todas las Marcas"})}),(0,t.jsxs)(n.Bw,{className:"bg-white",children:[t.jsx(n.Ql,{value:"all",children:"Todas las Marcas"}),j.map(e=>t.jsx(n.Ql,{value:e.id.toString(),children:e.name},e.id))]})]})]})]}),t.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:T.map(e=>t.jsx(d.default,{href:`/dashboard/store/${e.id}`,className:"block",children:(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow-md hover:shadow-xl transition-shadow duration-200 p-4",children:[(0,t.jsxs)("div",{className:"mb-2",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-800 truncate",children:e.name}),t.jsx("p",{className:"text-sm text-gray-600 truncate",children:e.location})]}),(0,t.jsxs)("div",{className:"text-sm space-y-1",children:[(0,t.jsxs)("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-600",children:"Total:"}),t.jsx("span",{className:"font-medium",children:e.stats.total})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-green-600",children:"Disponibles:"}),t.jsx("span",{className:"font-medium",children:e.stats.available})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-amber-600",children:"Ocupados:"}),t.jsx("span",{className:"font-medium",children:e.stats.inUse})]})]})]})},e.id))})]})]})})}},37358:(e,a,s)=>{"use strict";s.d(a,{Z:()=>t});let t=(0,s(76557).Z)("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]])},11890:(e,a,s)=>{"use strict";s.d(a,{Z:()=>t});let t=(0,s(76557).Z)("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]])},39183:(e,a,s)=>{"use strict";s.d(a,{Z:()=>t});let t=(0,s(76557).Z)("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]])},90395:(e,a,s)=>{"use strict";s.r(a),s.d(a,{default:()=>t});let t=(0,s(68570).createProxy)(String.raw`/Users/yoyo/Desktop/adspace 2/app/dashboard/dashboard/page.tsx#default`)}};var a=require("../../../webpack-runtime.js");a.C(e);var s=e=>a(a.s=e),t=a.X(0,[8948,8164,4498,2796,9781,3560],()=>s(36636));module.exports=t})();